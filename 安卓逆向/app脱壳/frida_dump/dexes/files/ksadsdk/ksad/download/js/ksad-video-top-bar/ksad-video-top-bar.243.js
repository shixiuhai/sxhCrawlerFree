(()=>{"use strict";class t{static saveLocal(t,e){if("undefined"!=typeof TKLocalStorage)try{(new TKLocalStorage).set(t,e)}catch(i){}}static getLocalString(t){if("undefined"!=typeof TKLocalStorage)try{let e=(new TKLocalStorage).get(t);if(e)return e.toString()}catch(e){}return null}static getLocalInt(t){if("undefined"!=typeof TKLocalStorage)try{let e=(new TKLocalStorage).get(t);if(e)return Number.parseInt(e.toString())}catch(e){}return 0}static getLocalBoolean(t){if("undefined"!=typeof TKLocalStorage)try{let e=(new TKLocalStorage).get(t);if(e)return Boolean(e.toString)}catch(e){}return!1}}let e=null;const i="TKResIndexKey";class a{constructor(){var e,a,n;this.defaultHost="p1-lm.adukwai.com",this.currentIndex=0;let s=null===(n=null===(a=null===(e=d())||void 0===e?void 0:e.appConfig)||void 0===a?void 0:a.idc)||void 0===n?void 0:n.tkres;s&&0!=s.length||(s=["p1-lm.adukwai.com","p2-lm.adukwai.com"]),this.resList=s;let l=t.getLocalInt(i);l>s.length&&(l=0),this.currentIndex=l}static getInstance(){return e||(e=new a),e}getCurrentHost(){return this.currentIndex>=this.resList.length?this.defaultHost:this.resList[this.currentIndex]}markUrlFail(e){if(!(e.indexOf(this.getCurrentHost())<0||"undefined"!=typeof KSAdTKNetworkManager&&0==KSAdTKNetworkManager.getCurrentNetworkType())){const e=this.currentIndex;this.currentIndex=++this.currentIndex%this.resList.length,this.currentIndex!==e&&t.saveLocal(i,this.currentIndex)}}}var n=null,s=null,l=null,o=null;function r(t){console.log("tkloadcontroller  save global device info:"+JSON.stringify(t)),n=t}function h(){return n}function d(){return s}function c(){return o}function C(){const t=Tachikoma.env.styleTemplate;return t?JSON.parse(t):null}function p(){return Date.parse((new Date).toString())}function u(t){return t instanceof Error?t.stack?t.stack:t.message:"string"==typeof t?t:"number"==typeof t?t+"":"unknown"}function g(){return!v(Tachikoma.env.hasTKBridge)&&1==Tachikoma.env.hasTKBridge}function I(){return"Android"===Tachikoma.env.platform}function f(t){return"string"==typeof t&&t.length>0}function m(){return n?n.tkVersion:Tachikoma.env.tkVersion}function T(){return n?n.SDKVersion:Tachikoma.env.SDKVersion}function _(){return n?n.sdkType:Tachikoma.env.sdkType}function v(t){return null===t||null==t||""===t}function w(t){if(t)for(const i in t){if("object"==typeof t[i]&&!i.includes("$"))try{t[i].nativeID||(t[i].nativeID=i),w(t[i])}catch(e){}}}function S(t){let e=t;return e.indexOf("/")>=0||t.startsWith("http")||(e="https://"+a.getInstance().getCurrentHost()+"/kos/nlav111362/ksad/"+t),e}function y(t,e){!function(t,e,i){if(t&&e){const n=S(e);t.setImageLoadCallback&&n.startsWith("http")&&t.setImageLoadCallback((t=>{a.getInstance().markUrlFail(n),i&&i(t)})),t.setSrc(n)}}(t,e,null)}class k{static isAndroid(){return"Android"===this.platform}static isSupportDownloadProgressListen(){return this.isAndroid()||k.supportMinimumTKVersion("5.0.4")}static isSupportDownloadDel(){return this.isAndroid()&&k.supportMinimumTKVersion("5.0.7")}static getCurrentTimeStamp(){return(new Date).getTime()}static getSemiCircle(){return this.isAndroid()?180:Math.PI}static getRotateSemiCircle(){return this.isAndroid()?45:Math.PI}static compareVersion(t,e){if(void 0===t&&void 0===e)return 0;if(void 0===t)return-1;if(void 0===e)return 1;let i=t.split("."),a=e.split("."),n=Math.max(i.length,a.length);for(var s=0;s<n;s++){let t=Number(void 0!==i[s]?i[s]:"0"),e=Number(void 0!==a[s]?a[s]:"0");if(t>e)return 1;if(t!=e)return-1}return 0}static supportMinimumVersion(t="0.0.0",e="0.0.0"){let i=_(),a=1==i&&-1!=k.compareVersion(T(),t),n=2==i&&-1!=k.compareVersion(T(),e);return a||n}static supportCurrentVersion(t="0.0.0",e="0.0.0"){let i=_(),a=1==i&&0==k.compareVersion(T(),t),n=2==i&&0==k.compareVersion(T(),e);return a||n}static supportCurrentTKVersion(t="0.0.0"){return m()==t}static supportMinimumTKVersion(t="0.0.0"){return-1!=k.compareVersion(m(),t)}}k.platform=Tachikoma.env.platform;class L{static randomString(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i="",a=0;a<t;a++)i+=e.charAt(Math.floor(48*Math.random()));return i}static randomName(t){return"jscb_"+t+"_"+this.randomString(4)+this.globalIndex++}static registerCallback(t,e=!0){return this.registerCallbackForAction(t,e,"")}static registerCallbackForAction(t,e=!0,i){if(!t)return null;const a=this.randomName(i);return Tachikoma[a]=e=>{t(e)},"Tachikoma."+a}}L.globalIndex=0;const A=new class{constructor(){this.enabled=!1,this.logs=[]}setLoggerEnabled(t){this.enabled=t}log(t){if(this.enabled){const e=new Date;0==this.logs.length&&this.logs.push(e.getMonth()+1+":"+e.getDate()+"-"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()),this.logs.push(e.getMilliseconds()+":"+t)}}clear(){this.logs.splice(0,this.logs.length)}exportLog(){return JSON.stringify(this.logs)}};class D{static getDeviceInfoAsync(){return D.callNative("getDeviceInfo",null).then((t=>(t.result&&t.data&&r(t.data),t)))}static getKsAdDataAsync(){return D.callNative("getKsAdData",null).then((t=>{var e;return t.result&&t.data&&(e=t.data,o=e),t}))}static getKsAdConfigAsync(){return D.callNative("getKsAdConfig",null).then((t=>{var e;return t.result&&t.data&&(e=t.data,s=e),t}))}static getScreenOrientationAsync(){return D.callNative("getScreenOrientation",null)}static getVideoCloseTime(){return D.callNative("getVideoCloseTime",null)}static getContainerLimitAsync(){return D.callNative("getContainerLimit",null)}static getTKPreEnvAsync(){return D.callNative("getTKPreEnv",null)}static getDeviceInfo(t){this.callNativeWithCallback("getDeviceInfo",null,t)}static getKsAdData(t){this.callNativeWithCallback("getKsAdData",null,t)}static getKsAdConfig(t){this.callNativeWithCallback("getKsAdConfig",null,t)}static getScreenOrientation(t){this.callNativeWithCallback("getScreenOrientation",null,t)}static getContainerLimit(t){return this.callNativeWithCallback("getContainerLimit",null,t)}static registerLifecycleListener(t){this.callNativeWithCallback("registerLifecycleListener",null,t,!1)}static registerFocusListener(t){k.supportMinimumTKVersion("5.0.6")&&this.callNativeWithCallback("registerFocusListener",null,t,!1)}static registerNativeId(t){this.callNativeWithCallback("configNativeId",null,t,!1)}static registerExtraDataListener(t){this.callNativeWithCallback("getKsAdExtraData",null,t,!1)}static hideCard(t,e,i,a=!0){this.callNativeWithCallback("hide",{type:t,playDuration:e},i,a)}static sendLog(t,e){this.callNativeWithCallback("log",t,e)}static sendCommonLog(t,e){this.callNativeWithCallback("commonLog",t,e)}static sendCommercialLog(t,e){this.callNativeWithCallback("commercialLog",t,e)}static adOutCallback(t,e){k.supportMinimumTKVersion("5.0.6")&&this.callNativeWithCallback("adOutCallback",t,e)}static pageStatus(t,e){this.callNativeWithCallback("pageStatus",{status:t,errorMsg:f(e)?e:""})}static clickActionBase(t,e){this.callNativeWithCallback("clickAction",t,e)}static convert(t){this.callNativeWithCallback("convert",{clickActionButton:t})}static updateExceptedPosition(t){this.callNativeWithCallback("initKsAdFrame",t)}static replayVideo(){this.callNativeWithCallback("replayVideo")}static registerVideoListener(t){this.callNativeWithCallback("registerVideoListener",null,t,!1)}static dislike(){this.callNativeWithCallback("dislike")}static registerProgressListener(t){this.callNativeWithCallback("registerProgressListener",null,(e=>{t&&t(e)}),!1)}static registerVideoProgressListener(t){this.callNativeWithCallback("registerVideoProgressListener",null,t,!1)}static registerGetDynamicActionDesListener(t){this.callNativeWithCallback("getDynamicActionDes",null,t,!1)}static registerTimerListener(t){this.callNativeWithCallback("registerTimerListener",null,t,!1)}static registerVideoMuteStateListener(t){this.callNativeWithCallback("registerMuteStateListener",null,t,!1)}static registerVideoAutoPlayListener(t){this.callNativeWithCallback("registerVideoAutoPlayListener",null,t,!1)}static registerPlayStateResetListener(t){this.callNativeWithCallback("registerPlayStateResetListener",null,t,!1)}static updateVideoMuteState(t){this.callNativeWithCallback("updateVideoMuteState",{muted:t})}static skipVideo(t,e,i,a=0){this.callNativeWithCallback("skipVideo",{needPromopt:t,needReport:e,showTime:i,playDuration:a})}static closeVideo(t){this.callNativeWithCallback("closeVideo",{forceClose:t})}static showPlayEnd(t,e=0){this.callNativeWithCallback("showPlayEnd",{userForce:t,type:e})}static showPlayable(t=0){this.callNativeWithCallback("showPlayable",{playableSource:t})}static registerSceneChangeListener(t){this.callNativeWithCallback("registerSceneChangeListener",null,t,!1)}static hasReward(t){this.callNativeWithCallback("hasReward",{severCheckResult:t})}static clickGift(){this.callNativeWithCallback("clickGift")}static clickCall(t){this.callNativeWithCallback("clickCall",{isEnd:t})}static callButtonImpressionWhenPlay(){this.callNativeWithCallback("callButtonImpressionWhenPlay")}static callButtonImpressionWhenFinish(){this.callNativeWithCallback("callButtonImpressionWhenFinish")}static registerDeepRewardListener(t){this.callNativeWithCallback("registerDeepRewardListener",null,t,!1)}static giveRewardInAdvance(t){this.callNativeWithCallback("giveRewardInAdvance",null,t,!1)}static showLiveEndPage(t){this.callNativeWithCallback("showLiveEndPage",null,t,!1)}static updateRewardTaskState(t){this.callNativeWithCallback("updateRewardTaskState",null,t,!1)}static openURL(t,e,i){this.callNativeWithCallback("openURL",{url:t,title:e,showConfirmDialog:i})}static showTKDialog(t){this.callNativeWithCallback("showTKDialog",{templateId:t})}static closeTKDialog(t){this.callNativeWithCallback("closeTKDialog",{templateId:t})}static registerKeyboardChangeListener(t){this.callNativeWithCallback("registerKeyboardChangeListener",null,t,!1)}static registerShakeListener(t){this.callNativeWithCallback("registerMotionListener",null,t,!1)}static close(t){this.callNativeWithCallback("close",null,t,!1)}static closePassData(t,e){this.callNativeWithCallback("close",t,e,!1)}static registerConvertStatusListener(t){this.callNativeWithCallback("registerConvertStatusListener",null,t,!1)}static cardImpression(){this.callNativeWithCallback("cardImpression")}static getCardShowCount(t){this.callNativeWithCallback("getCardShowCount",null,t,!1)}static getNativeData(t,e){this.callNativeWithCallback("getNativeData",{target:t},e,!1)}static updateExtraReward(t){this.callNativeWithCallback("updateExtraReward",t)}static registerApkInstalledListener(t){this.callNativeWithCallback("registerApkInstalledListener",null,t,!1)}static showToast(t){this.callNativeWithCallback("showToast",{message:t})}static registerExtraDialogListener(t){this.callNativeWithCallback("registerExtraDialogListener",null,t,!1)}static getPlayEndType(t){this.callNativeWithCallback("getPlayEndType",null,t,!1)}static playableConvert(t){this.callNativeWithCallback("playableConvert",t)}static getKsPlayableAdData(t){this.callNativeWithCallback("getKsPlayableAdData",null,t)}static getKsPlayableDeviceInfo(t){this.callNativeWithCallback("getKsPlayableDeviceInfo",null,t)}static registerPlayableStatusListener(t){this.callNativeWithCallback("registerPlayableStatusListener",null,t,!1)}static getTrackAdStatus(t){this.callNativeWithCallback("getTrackAdStatus",null,t,!1)}static showLandingPage(t){this.callNative("showLandingPage",{needCloseNeo:t})}static needCloseNeo(t){this.callNativeWithCallback("needCloseNeo",{needClose:t})}static registerBackPressed(t){I()&&this.callNativeWithCallback("registerBackPressedListener",null,t,!1)}static innerAdImpression(){this.callNativeWithCallback("adImpression",null)}static neoDidShowPlayAgain(){this.callNativeWithCallback("neoDidShowPlayAgain")}static showPlayAgain(){this.callNativeWithCallback("showPlayAgain")}static registerAggregationDataListener(t){this.callNativeWithCallback("registerAggregationDataListener",null,t,!1)}static getLandingPageInfo(t){this.callNativeWithCallback("getLandingPageInfo",null,t,!1)}static registerNeoStatusListener(t){this.callNativeWithCallback("registerNeoStatusListener",null,t,!1)}static callNative(t,e){return new Promise(((i,a)=>this.callNativeWithCallback(t,e,(t=>{t?(1!=t.result&&(t.result=null),i(t)):i({result:0,data:null})}))))}static callNativeWithCallback(t,e,i,a=!0){const n=g()?1:0;g()&&"pageStatus"==t||g()&&"registerLifecycleListener"==t?this.callNativeWithCallbackAndType(t,e,i,a,0):this.callNativeWithCallbackAndType(t,e,i,a,n)}static callTKWithCallback(t,e,i,a=!0){this.callNativeWithCallbackAndType(t,e,i,a,1)}static callNativeWithCallbackAndType(t,e,i,a=!0,n=0){if("undefined"==typeof KwaiAd)return A.log("undefined value KwaiAd"),void(i&&i({result:0,data:null}));A.log("call:"+t);let s=e=>{let a=0,n=null;try{let t=null;t="string"==typeof e?JSON.parse(e):e,a=t.result,n=t.data}catch(s){a=0,n=null}A.log("cb:"+t+"  r:"+a),i&&i({result:a,data:n})};const l=L.registerCallbackForAction(s,a,t),o={action:t,data:JSON.stringify(e||{}),callback:!0===Tachikoma.env.useNewBridge?s:l};0==n?KwaiAd.callAdBridge(o):KwaiAd.callTKBridge(o)}}class R extends TKView{constructor(){super(),this.style={alignItems:"center",justifyContent:"center"},this.imageView=new TKImage,this.appendChild(this.imageView)}setImageSize(t){this.imageView.style={width:t.width,height:t.height}}setImageSrc(t){y(this.imageView,t)}setImageSrcAndSize(t,e){this.setImageSize(e),this.setImageSrc(t)}configImage(t){t&&t(this.imageView)}}var b,E,B,N;!function(t){t[t.NONE=-1]="NONE",t[t.ACTION_BAR_CLICK=1]="ACTION_BAR_CLICK",t[t.UNKNOWN_ITEM_CLICK=0]="UNKNOWN_ITEM_CLICK",t[t.PORTRAIT_CLICK=13]="PORTRAIT_CLICK",t[t.COMMENT_CLICK=14]="COMMENT_CLICK",t[t.PLAY_END_ICON_CLICK=15]="PLAY_END_ICON_CLICK",t[t.PLAY_END_ICON_TITLE_CLICK=16]="PLAY_END_ICON_TITLE_CLICK",t[t.PLAY_END_ICON_DESCRIPTION_CLICK=17]="PLAY_END_ICON_DESCRIPTION_CLICK",t[t.COMMENT_DETAIL_CLICK=25]="COMMENT_DETAIL_CLICK",t[t.PLAY_END_ACTION_BAR_CLICK=26]="PLAY_END_ACTION_BAR_CLICK",t[t.CARD_ACTION_BAR_CLICK=29]="CARD_ACTION_BAR_CLICK",t[t.CARD_ICON_CLICK=30]="CARD_ICON_CLICK",t[t.CARD_ICON_NAME_CLICK=31]="CARD_ICON_NAME_CLICK",t[t.CARD_ICON_COMMENT_CLICK=32]="CARD_ICON_COMMENT_CLICK",t[t.CARD_BLANK_AREA_CLICK=35]="CARD_BLANK_AREA_CLICK",t[t.CARD_PLAY_END_CLICK1=37]="CARD_PLAY_END_CLICK1",t[t.CARD_PLAY_END_CLICK2=38]="CARD_PLAY_END_CLICK2",t[t.PLAY_END_CALL_CLICK=39]="PLAY_END_CALL_CLICK",t[t.PLAY_DETAIL_CALL_CLICK=40]="PLAY_DETAIL_CALL_CLICK",t[t.PLAY_END_GIFT_CLICK=41]="PLAY_END_GIFT_CLICK",t[t.CARD_APP_STORE_CLICK=45]="CARD_APP_STORE_CLICK",t[t.CARD_APP_DOWNLOAD_NUM_CLICK=46]="CARD_APP_DOWNLOAD_NUM_CLICK",t[t.CARD_OTHERAREA_CLICK=53]="CARD_OTHERAREA_CLICK",t[t.CARD_ICON_MOBILE_CLICK=54]="CARD_ICON_MOBILE_CLICK",t[t.CARD_PICTURE_CLICK_ONE=57]="CARD_PICTURE_CLICK_ONE",t[t.CARD_PICTURE_CLICK_TWO=58]="CARD_PICTURE_CLICK_TWO",t[t.CARD_PICTURE_CLICK_THREE=59]="CARD_PICTURE_CLICK_THREE",t[t.CARD_PICTURE_TITLE_CLICK_ONE=60]="CARD_PICTURE_TITLE_CLICK_ONE",t[t.CARD_PICTURE_TITLE_CLICK_TWO=61]="CARD_PICTURE_TITLE_CLICK_TWO",t[t.CARD_PICTURE_TITLE_CLICK_THREE=62]="CARD_PICTURE_TITLE_CLICK_THREE",t[t.CARD_PICTURE_SUBTITLE_CLICK_ONE=63]="CARD_PICTURE_SUBTITLE_CLICK_ONE",t[t.CARD_PICTURE_SUBTITLE_CLICK_TWO=64]="CARD_PICTURE_SUBTITLE_CLICK_TWO",t[t.CARD_PICTURE_SUBTITLE_CLICK_THREE=65]="CARD_PICTURE_SUBTITLE_CLICK_THREE",t[t.CARD_RANK_CLICK=75]="CARD_RANK_CLICK",t[t.CARD_DOWNLOAD_CNT_CLICK=76]="CARD_DOWNLOAD_CNT_CLICK",t[t.CARD_TAG_CLICK=77]="CARD_TAG_CLICK",t[t.CARD_ITEM_BULLET_CLICK=80]="CARD_ITEM_BULLET_CLICK",t[t.CARD_RECOMMEND_REASON_CLICK=84]="CARD_RECOMMEND_REASON_CLICK",t[t.CARD_PAGE_CLICK=85]="CARD_PAGE_CLICK",t[t.COMMENT_PICTURE_CLICK=100]="COMMENT_PICTURE_CLICK",t[t.PLAYEND_ICON_OTHERAREA_CLICK=104]="PLAYEND_ICON_OTHERAREA_CLICK",t[t.INTERACT_LANDING_PAGE_CLICK=110]="INTERACT_LANDING_PAGE_CLICK",t[t.ACTIONBAR_ICON_CLICK=115]="ACTIONBAR_ICON_CLICK",t[t.ACTIONBAR_ICON_COMMENT_CLICK=117]="ACTIONBAR_ICON_COMMENT_CLICK",t[t.ACTIONBAR_ICON_OTHER_AREA_CLICK=118]="ACTIONBAR_ICON_OTHER_AREA_CLICK",t[t.CLOSE_BULLET_ICON_CLICK=127]="CLOSE_BULLET_ICON_CLICK",t[t.CLOSE_BULLET_ICON_TITLE_CLICK=128]="CLOSE_BULLET_ICON_TITLE_CLICK",t[t.CLOSE_BULLET_ICON_DESCRIPTION_CLICK=129]="CLOSE_BULLET_ICON_DESCRIPTION_CLICK",t[t.CLOSE_BULLET_OTHERAREA_CLICK=130]="CLOSE_BULLET_OTHERAREA_CLICK",t[t.CLOSE_BULLET_ACTION_BAR_CLICK=131]="CLOSE_BULLET_ACTION_BAR_CLICK",t[t.SPLASH_CONVERSION_BUTTON_CLICK=132]="SPLASH_CONVERSION_BUTTON_CLICK",t[t.NEO_AUTO_SHOW_STOREKIT=147]="NEO_AUTO_SHOW_STOREKIT",t[t.CARD_LEFT_ACTION_BAR_CLICK=150]="CARD_LEFT_ACTION_BAR_CLICK",t[t.CARD_SWIPE_CONVERT=153]="CARD_SWIPE_CONVERT",t[t.ONLINE_AUDIENCE_NUM=154]="ONLINE_AUDIENCE_NUM",t[t.SHAKE_ICON_SHACK=157]="SHAKE_ICON_SHACK",t[t.SHAKE_BIG_ICON_CLICK=158]="SHAKE_BIG_ICON_CLICK",t[t.ROTATE_ICON_ROTATE=161]="ROTATE_ICON_ROTATE",t[t.ROTATE_BIG_ICON_CLICK=162]="ROTATE_BIG_ICON_CLICK",t[t.CARD_TROLLEY_ICON_CLICK=164]="CARD_TROLLEY_ICON_CLICK",t[t.LANDING_PAGE_OTHER_AREA_CLICK=171]="LANDING_PAGE_OTHER_AREA_CLICK",t[t.CARD_FOLLOW_NUM=172]="CARD_FOLLOW_NUM",t[t.FALL_ICON_CLICK=173]="FALL_ICON_CLICK",t[t.LIVE_BUTTON_CLICK=175]="LIVE_BUTTON_CLICK",t[t.DIRECT_H5_PAGE_CLICK=177]="DIRECT_H5_PAGE_CLICK",t[t.GOODS_ITEM_CARD_CLICK=178]="GOODS_ITEM_CARD_CLICK",t[t.GOODS_ITEM_CARD_SLIDE_CLICK=179]="GOODS_ITEM_CARD_SLIDE_CLICK",t[t.ITEM_HOT_BUY_STYLE_CLICK=180]="ITEM_HOT_BUY_STYLE_CLICK",t[t.GUIDE_ENTER_LIVE_CLICK=181]="GUIDE_ENTER_LIVE_CLICK",t[t.AUTO_CLICK_OTHER_AREA=182]="AUTO_CLICK_OTHER_AREA",t[t.POPLAY_FALL_IOCN=186]="POPLAY_FALL_IOCN",t[t.ROTATE_SHAKE_BIG_ICON_CLICK=187]="ROTATE_SHAKE_BIG_ICON_CLICK"}(b||(b={})),function(t){t[t.adClickReward=1]="adClickReward"}(E||(E={})),function(t){t[t.isRewarded=1]="isRewarded",t[t.noExtraReward=2]="noExtraReward",t[t.hasWatchReward=3]="hasWatchReward"}(B||(B={})),function(t){t[t.horizontal=1]="horizontal",t[t.vertical=2]="vertical"}(N||(N={}));S("h5_default_icon.png"),S("download_default_icon.png");var K,O;!function(t){t[t.THREEIMG_DEFAULT_CLICK=0]="THREEIMG_DEFAULT_CLICK",t[t.THREEIMG_FIRST_CLICK=1]="THREEIMG_FIRST_CLICK",t[t.THREEIMG_SECOND_CLICK=2]="THREEIMG_SECOND_CLICK",t[t.THREEIMG_THIRD_CLICK=3]="THREEIMG_THIRD_CLICK"}(K||(K={})),function(t){t[t.picStyle=1]="picStyle",t[t.textStyle=2]="textStyle"}(O||(O={}));class P extends TKView{constructor(t,e,i="#30303099",a="#FFFFFF",n){super(),this.adInfo=t,this.isVertical=0==e,this.backgroundColor=i,this.color=a,this.shadow=n,this.setupView(),this.setupData()}setupView(){this.style={flexDirection:"row",backgroundColor:this.backgroundColor,borderRadius:4},this.addEventListener("tap",(()=>{})),this.nameLabel=this.createLabel(this.color),this.nameLabel.style={marginLeft:10},this.appendChild(this.nameLabel),this.developerLabel=this.createLabel(this.color),this.developerLabel.style={flexShrink:1,textLineClamp:1,textOverflow:"ellipsis"},this.appendChild(this.developerLabel),this.otherLabel=this.createLabel(this.color),this.otherLabel.style={marginRight:10},this.appendChild(this.otherLabel),f(this.shadow)&&(this.otherLabel.style={shadow:this.shadow})}createLabel(t){let e=new TKText;return e.style={color:t,fontSize:10,textLineHeight:16,marginTop:10,marginBottom:10},e}setupData(){let t="";if(this.isVertical?(this.nameLabel.setText(this.appendNameText("")),this.developerLabel.setText(this.appendDeveloperText(""))):(t=this.appendNameText(t),t=this.appendDeveloperText(t)),k.supportMinimumTKVersion("4.0.5")?f(this.adInfo.downloadSafeInfo.appVersion)&&(t+="| 版本 "+this.adInfo.downloadSafeInfo.appVersion):f(this.adInfo.adBaseInfo.appVersion)&&(t+="版本 "+this.adInfo.adBaseInfo.appVersion),v(this.adInfo.downloadSafeInfo.introductionInfoUrl)&&v(this.adInfo.downloadSafeInfo.appPermissionInfoUrl)&&v(this.adInfo.downloadSafeInfo.appPrivacyUrl)?t+=" ":t+=" | ",this.span=new TKSpan,!v(this.adInfo.downloadSafeInfo.introductionInfoUrl)){const e=t.length;t+="功能";const i=t.length;v(this.adInfo.downloadSafeInfo.appPermissionInfoUrl)&&v(this.adInfo.downloadSafeInfo.appPrivacyUrl)?t+=" ":t+=" | ",this.introductionClickSpanItem=new TKSpanItem,this.introductionClickSpanItem.spanType="click",this.introductionClickSpanItem.start=e,this.introductionClickSpanItem.end=i,this.introductionClickSpanItem.color=this.color,this.introductionClickSpanItem.setSpanOnClickListener((()=>{this.clickCallback&&this.clickCallback(this.adInfo.downloadSafeInfo.introductionInfoUrl,"功能介绍")})),this.span.addSpan(this.introductionClickSpanItem)}if(!v(this.adInfo.downloadSafeInfo.appPermissionInfoUrl)){const e=t.length;t+="权限";const i=t.length;v(this.adInfo.downloadSafeInfo.appPrivacyUrl)?t+=" ":t+=" | ",this.permissionClickSpanItem=new TKSpanItem,this.permissionClickSpanItem.spanType="click",this.permissionClickSpanItem.start=e,this.permissionClickSpanItem.end=i,this.permissionClickSpanItem.color=this.color,this.permissionClickSpanItem.setSpanOnClickListener((()=>{this.clickCallback&&this.clickCallback(this.adInfo.downloadSafeInfo.appPermissionInfoUrl,"权限信息")})),this.span.addSpan(this.permissionClickSpanItem)}if(!v(this.adInfo.downloadSafeInfo.appPrivacyUrl)){const e=t.length;t+="隐私";const i=t.length;t+=" ",this.privacyClickSpanItem=new TKSpanItem,this.privacyClickSpanItem.spanType="click",this.privacyClickSpanItem.start=e,this.privacyClickSpanItem.end=i,this.privacyClickSpanItem.color=this.color,this.privacyClickSpanItem.setSpanOnClickListener((()=>{this.clickCallback&&this.clickCallback(this.adInfo.downloadSafeInfo.appPrivacyUrl,"隐私政策")})),this.span.addSpan(this.privacyClickSpanItem)}this.otherLabel.setSpan(t,this.span)}appendNameText(t){return k.supportMinimumTKVersion("4.0.5")?f(this.adInfo.downloadSafeInfo.appName)&&(t+=this.adInfo.downloadSafeInfo.appName+" "):f(this.adInfo.adBaseInfo.appName)&&(t+=this.adInfo.adBaseInfo.appName+" "),t}appendDeveloperText(t){return k.supportMinimumTKVersion("4.0.5")?f(this.adInfo.downloadSafeInfo.corporationName)&&(t+=this.adInfo.downloadSafeInfo.corporationName+" "):f(this.adInfo.adBaseInfo.corporationName)&&(t+=this.adInfo.adBaseInfo.corporationName+" "),t}}class M extends TKView{constructor(){super(),this.style={height:28,bottomLeftRadius:14,topLeftRadius:14,backgroundColor:"#30303099",flexDirection:"row",alignItems:"center"};const t=new TKImage;t.style={marginLeft:5,width:18,height:18},t.setSrc("image/ksad-video-top-bar/icon_ksad_gift_small.png"),this.appendChild(t);const e=new TKText;e.style={color:"#FFFFFF",fontSize:14,marginLeft:4,marginRight:8},e.setText("观看完视频可获得奖励"),this.appendChild(e),this.addEventListener("tap",(()=>{}))}}class V extends Object{constructor(t,e,i,a){var n;super(),this.depIds={},this.vm=t,this.getter="function"==typeof e?e:this.parseGetter(e.trim()),this.cb=i,this.value=this.get(),this.cb(null!==(n=this.value)&&void 0!==n?n:a,null),console.log("Watcher on "+e)}update(){const t=this.get();t!=this.value&&(this.cb.call(this.vm,t,this.value),this.value=t)}addDep(t){const e=t.pid;this.depIds.hasOwnProperty(e)||(t.addDep(this),this.depIds[e]=t)}get(){V.target=this;const t=this.getter.call(this.vm,this.vm);return V.target=null,t}parseGetter(t){if(/[^\w.$]/.test(t))return;const e=t.split(".");return function(t){for(let i=0,a=e.length;i<a;i++){if(!t)return;t=t[e[i]]}return t}}}function x(t){return!!t}let F;function W(){if(null!=F)return F;let t=!1;try{t=!1,F=t}catch(e){}return t}function U(t,e){if(!0===W()&&(null==t||!1===t))throw new Error("tkmvvm ----- 请检查传值: "+e)}function G(t){W()&&console.log("tachikoma TKMVVM log -> "+t)}class H extends Object{constructor(t,e){super(),this.object=t,this.observeKey=e,this._observe(t,e)}_observe(t,e){var i=this;Array.isArray(t)?this.defineArray(t):Object.keys(t).forEach((function(a){e?e===a&&i.observeValueWithKey(t,a):i.observeValueWithKey(t,a)}))}observeValueWithKey(t,e){let i=t[e];var a=new j(e);J(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return V.target&&a.depend(),i},set:function(t){t!==i&&(i=t,a.notify(),J(t))}})}defineArray(t){if(t)for(let e=0,i=t.length;e<i;e++)J(t[e])}}var Y=0;class j extends Object{constructor(t){super(),this.key=t,this.pid=Y++,this.deps=new Array}depend(){V.target.addDep(this)}addDep(t){this.deps.push(t)}removeDep(t){}notify(){this.deps.forEach((function(t){t.update()}))}}function J(t,e){if(!t||"object"!=typeof t)return;var i;if(!("object"==typeof(i=t)&&Object.keys(i).length>0))return;let a=!1,n=(null!=e?e:"")+"_tkmvvm_observed";if(t.hasOwnProperty(n)&&(a=t[n]),!a)return G("observe "+n),t[n]=!0,new H(t,e);G("already observe "+n)}class z extends Object{constructor(){super()}tk_observe(t){x(t)&&(t in this?J(this,t):console.log("=====++++++ observe2: key not in this:"+t+":"+typeof this))}}function $(t,e,i){if(!x(t)||!x(e)||!x(i))return;const a=q(e),n=null==a?void 0:a.split(".");if(!n)return void U(n,"tk_bind error, check bind path");const s=n[0];t.tk_observe(s),new V(t,a,((t,e)=>{i&&i(t)}))}function q(t){let e=function(t){if(t)return t.bind_path?t.$bind_path:"string"==typeof t?t:void 0}(t);if(e)return e;U(e,"tk_bind error, check bind path")}let X;function Z(){var t;return X||(X={all:t=t||new Map,on(e,i){const a=t.get(e);a?a.push(i):t.set(e,[i])},off(e,i){const a=t.get(e);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(e,[]))},emit(e,i){let a=t.get(e);a&&a.slice().map((t=>{t(i)})),a=t.get("*"),a&&a.slice().map((t=>{t(e,i)}))},clear(){t.clear()}}),X}var Q,tt,et;!function(t){t.adClickCallback="adClickCallback"}(Q||(Q={})),function(t){t.START="start",t.CENTRT="center",t.END="end"}(tt||(tt={})),function(t){t[t.unknown=0]="unknown",t[t.DetailOne=1]="DetailOne",t[t.Simple=2]="Simple",t[t.DetailTwo=3]="DetailTwo"}(et||(et={}));var it,at;!function(t){t[t.RETAIN_CARD_TYPE_1=8]="RETAIN_CARD_TYPE_1",t[t.RETAIN_CARD_TYPE_2=9]="RETAIN_CARD_TYPE_2",t[t.RETAIN_CARD_TYPE_3=10]="RETAIN_CARD_TYPE_3",t[t.RETAIN_CARD_TYPE_4=11]="RETAIN_CARD_TYPE_4",t[t.RETAIN_CARD_TYPE_5=14]="RETAIN_CARD_TYPE_5",t[t.RETAIN_CARD_TYPE_7=16]="RETAIN_CARD_TYPE_7",t[t.RETAIN_CARD_TYPE_8=17]="RETAIN_CARD_TYPE_8",t[t.RETAIN_CARD_TYPE_9=18]="RETAIN_CARD_TYPE_9",t[t.RETAIN_CARD_TYPE_10=19]="RETAIN_CARD_TYPE_10",t[t.RETAIN_CARD_TYPE_11=20]="RETAIN_CARD_TYPE_11"}(it||(it={}));class nt{}!function(t){t[t.UNKNOWN_LIVE_ROOM_PATTERN=0]="UNKNOWN_LIVE_ROOM_PATTERN",t[t.STANDARD_LIVE_ROOM_PATTERN=1]="STANDARD_LIVE_ROOM_PATTERN",t[t.SIMPLIFIED_LIVE_ROOM_PATTERN=2]="SIMPLIFIED_LIVE_ROOM_PATTERN"}(at||(at={}));var st,lt,ot;!function(t){t[t.LIVE_CUT3_STYLE1=11]="LIVE_CUT3_STYLE1",t[t.LIVE_CUT3_STYLE2=12]="LIVE_CUT3_STYLE2"}(st||(st={})),function(t){t[t.LIVE_CUT3_STYLE2=1]="LIVE_CUT3_STYLE2"}(lt||(lt={})),function(t){t[t.unkonwn=0]="unkonwn",t[t.videoPromoteFollow=1]="videoPromoteFollow",t[t.videoPromoteGoods=2]="videoPromoteGoods",t[t.liveGoods=3]="liveGoods",t[t.liveNotGoods=4]="liveNotGoods",t[t.videoAd=5]="videoAd"}(ot||(ot={}));function rt(t,e){if(!(null==t?void 0:t.impAdInfo)||0==t.impAdInfo.length)return null;let i=null;if(e)for(let a=0;a<t.impAdInfo.length;++a){let n=t.impAdInfo[a];if(n.adInfo.length>0&&n.adInfo[0].adBaseInfo.creativeId==e){i=n;break}}return i||(i=t.impAdInfo[0]),i}function ht(t){var e;return(null===(e=null==t?void 0:t.adInfo)||void 0===e?void 0:e.length)>0?t.adInfo[0]:null}function dt(t){try{return t.adMaterialInfo.materialFeature[0].featureType}catch(e){}return 0}function ct(t){try{return t.adMaterialInfo.materialFeature[0].videoDuration}catch(e){}return 0}function Ct(t,e){let i;try{switch(e){case 1:i=t.adMatrixInfo.adDataV2.middleTKCardInfo.templateId;break;case 12:i=t.adMatrixInfo.adDataV2.neoTKInfo.templateId;break;case 3:i=t.adMatrixInfo.adDataV2.fullScreenInfo.templateId;break;case 2:i=t.adMatrixInfo.adDataV2.interstitialCardInfo.templateId;break;case 4:i=t.adMatrixInfo.adDataV2.topFloorTKInfo.templateId;break;case 6:case 9:i=t.adMatrixInfo.adDataV2.actionBarTKInfo.templateId;break;case 5:i=t.adMatrixInfo.adDataV2.splashPlayCardTKInfo.templateId;break;case 7:i=t.adMatrixInfo.adDataV2.activityMiddlePageInfo.templateId;break;case 10:i=t.adMatrixInfo.adDataV2.rewardVideoTaskInfo.templateId;break;case 11:i=t.adMatrixInfo.adDataV2.pushTKInfo.templateId;break;case 13:i=t.adMatrixInfo.adDataV2.splashEndCardTKInfo.templateId;break;case 14:i=t.adMatrixInfo.adDataV2.videoLiveTKInfo.templateId;break;case 15:i=t.adMatrixInfo.adDataV2.installedActivateInfo.templateId;break;case 16:i=t.adMatrixInfo.adDataV2.videoImageTKInfo.templateId;break;case 100:i=t.adMatrixInfo.adDataV2.complianceCardInfo.templateId;break;case 101:i=t.adMatrixInfo.adDataV2.downloadConfirmCardInfo.templateId;break;case 17:i=t.adMatrixInfo.adDataV2.feedTKCardInfo.templateId;break;default:i=void 0}}catch(a){i=void 0}return i}function pt(t,e){let i=Ct(t,e);if(console.log("tkloadcontroller target templateid:"+i),!f(i))return;const a=t.adMatrixInfo.adDataV2.templateDatas.length;for(let n=0;n<a;n++){let e=t.adMatrixInfo.adDataV2.templateDatas[n];if(e.templateId==i)return e}}function ut(t){const e=t.adMaterialInfo.materialFeature.length>0?t.adMaterialInfo.materialFeature[0]:null;if(e){let a=e.videoDuration;0==a&&(a=e.videoDurationMs/1e3);let n=a;try{n=t.adRewardInfo.rewardTime}catch(i){}return n?0==a?n:Math.min(a,n):a}return-1}function gt(t,e){let i=!0;if(1==t.adBaseInfo.adOperationType)try{let a=t.downloadSafeInfo.complianceInfo;if(console.log("tkloadcontroller   download ad:"+JSON.stringify(a)),null!=a)switch(e){case 1:i=3!=a.actionBarType;break;case 2:i=3!=a.describeBarType;break;case 3:i=3!=a.materialJumpType;break;default:i=!0}}catch(a){i=!0}else try{let a=t.unDownloadConf.unDownloadRegionConf;if(console.log("tkloadcontroller   h5 ad:"+JSON.stringify(a)),null!=a)switch(e){case 1:i=1!=a.actionBarType;break;case 2:i=1!=a.describeBarType;break;case 3:i=1!=a.materialJumpType;break;default:i=!0}console.log("tkloadcontroller   h5 ad:"+i)}catch(a){i=!0}return i}function It(t,e){try{let i=e.adMatrixInfo.adDataV2.templateDatas;for(let e=0;e<i.length;e++){let a=i[e];if(a&&t==a.templateId)return a}}catch(i){}}class ft{static isClickReward(t,e){try{let i=!0;if(k.isAndroid()&&!v(e)&&(i=e.sdkApiVersionCode>=3032401),t.adBaseInfo.extraClickReward&&i)return!0}catch(i){}return!1}static isEcOrder(t,e){try{return 1==t.abConfig.ecRewardAdKwaishopStyle&&(4==e.adStyleConfInfo.innerAdType||5==e.adStyleConfInfo.innerAdType)}catch(i){}return!1}static isOriginLiveAd(t){return 1==t.adBaseInfo.universeLiveType&&0!=t.advertiserInfo.userId}static getAuthorId(t){return t.advertiserInfo.userId}static getLiveStreamId(t){return t.adBaseInfo.liveStreamId}static getIconUrl(t){let e=t.adBaseInfo.appIconUrl;return!v(e)&&ft.isDownloadInteraction(t)||(e=t.advertiserInfo.portraitUrl),v(e)&&(e="https://static.yximgs.com/udata/pkg/ad-universe/universe_icon.png"),e}static isDownloadInteraction(t){return 1==t.adBaseInfo.adOperationType}static getAdTitle(t){let e=null;try{e=1==t.adBaseInfo.adOperationType?t.adBaseInfo.appName:t.adBaseInfo.productName,e=f(e)?e:t.advertiserInfo.rawUserName}catch(i){}return e=f(e)?e:"可爱的广告君",e}static getAdActionDesc(t){if(v(t))return"查看详情";let e=t.adBaseInfo.adActionDescription;return v(e)&&(e=this.isDownloadInteraction(t)?"立即下载":"查看详情"),e}static obtainVideoLiveData(t){let e=pt(t,14);return JSON.parse(e.data)}static liveGetAuthorName(t,e){let i="";try{i=t.neoLiveAuthorInfoData.authorName}catch(a){}try{v(i)&&(i=t.neoLiveCartDetailData.authorName)}catch(a){}try{v(i)&&(i=e.adBaseInfo.appName)}catch(a){}return i}static liveGetLiveDesc(t,e){let i="";try{i=t.neoLiveCartDetailData.liveDesc}catch(a){}try{v(i)&&(i=t.neoLiveAuthorInfoData.liveDesc)}catch(a){}try{v(i)&&(i=t.adDescription)}catch(a){}try{v(i)&&(i=e.adBaseInfo.adDescription)}catch(a){}return i}static getNeoActionBarCardType(t){try{let e=t.adMatrixInfo.adDataV2.neoTKInfo.actionBarCardType;if(!v(e))return e}catch(e){}return null}static getFullscreenActionBarCardType(t){try{let e=t.adMatrixInfo.adDataV2.fullScreenInfo.actionBarCardType;if(!v(e))return e}catch(e){}return null}static getNeoAutoDialogType(t){try{let e=0,i=dt(t);e=1==i?t.adMatrixInfo.adDataV2.neoTKInfo.neoAutoDialogType:2==i?t.adMatrixInfo.adDataV2.videoImageTKInfo.neoAutoDialogType:0,1!=e&&2!=e&&(e=0);let a=function(t){if(null==t)return null;try{let e=null,i=dt(t);if(2==i?e=Ct(t,16):1==i&&(e=Ct(t,12)),e){let i=It(e,t);return JSON.parse(i.data).neoAutoDialog}}catch(e){}return null}(t);return 1==e&&v(a.neoAutoDialogGiftPic)&&v(a.neoAutoDialogGiftTitle)&&(e=0),e}catch(e){}return 0}static hasNeoAutoDialog(t){let e=ft.getNeoAutoDialogType(t);return!v(e)&&0!=e}}class mt{constructor(){this.reward_type=-1,this.task_type=-1,this.task_step=-1}static createPageShowInstance(t,e,i){if(0==e||v(i))return null;if(i.loadDataTime<=0||i.downloadFinishTime<=0)return null;let a=this.INVALID_VALUE;if(e!=this.INVALID_VALUE){a=Date.parse((new Date).toString())-e,a<this.INVALID_VALUE&&(a=this.INVALID_VALUE)}let n=new mt;return n.page_status=2,n.load_type=i.loadFromCache?2:1,n.render_duration_ms=a,n.download_type=i.downloadType,n.download_size=i.downloadSize,n.creative_id=t.adBaseInfo.creativeId,n.video_url=function(t){try{return t.adMaterialInfo.materialFeature[0].materialUrl}catch(e){}return""}(t),n.video_duration_ms=ct(t),n}}function Tt(t){D.sendCommercialLog(t,(()=>{}))}mt.INVALID_VALUE=-1;const _t=28;class vt extends TKView{constructor(t){if(super(),this.callActionTimer=0,this.hasShowCallBtn=!1,this.closeTimer=0,this.hasShowCloseBtn=!1,this.expcetedHeight=44,this.playEndCloseHadDelayShow=!1,this.isFinishAdvance=!1,this.vm=t,this.hasReward=!1,this.btnMargin=this.vm.isDeepRewardTask()?8:12,this.currentTime=0,this.actionState=-1,this.style={position:"absolute",top:0,left:0,right:0,flexDirection:"column",justifyContent:"center",alignItems:"center"},this.topBarContainer=new TKView,this.topBarContainer.style={width:"100%",height:44,flexDirection:"row",justifyContent:"space-between",alignItems:"center"},this.appendChild(this.topBarContainer),this.leftContainer=new TKView,this.leftContainer.style={height:_t,marginLeft:16-this.btnMargin/2,alignItems:"center",justifyContent:"center",flexDirection:"row"},this.topBarContainer.appendChild(this.leftContainer),this.rightContainer=this.getRightContainer(),this.topBarContainer.appendChild(this.rightContainer),this.videoDuration=this.vm.getVideoDuration(),this.vm.isRewardVideo()){let t=this.vm.getSkipConfirmSwitch();this.skipNeedPromopt=t,this.rewardSecond=this.vm.getRewardTime(),this.skipSecond=Math.min(this.vm.getSkipShowTime(),this.rewardSecond),this.leftTime=this.rewardSecond}else this.skipNeedPromopt=!1,this.skipSecond=this.vm.getSkipShowTime(),ft.isOriginLiveAd(this.vm.adInfo)?this.rewardSecond=30:this.rewardSecond=this.videoDuration,this.leftTime=this.rewardSecond;if(k.supportMinimumVersion("3.3.21","3.3.28")){let t=null,e=this.vm.isShowPrivacy(),i="flex-end";0!=this.vm.screenOrientation&&e?(t=new TKView,t.style={width:"100%",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},i="flex-start",this.appendChild(t)):t=this;let a=!1;if(e){this.vm.configInfo.abConfig.reduceDownloadVisibility&&(this.style={gradientBgColor:"-90,#00000030,#00000000"});const e=this.vm.configInfo.abConfig.reduceDownloadVisibility?"#FFFFFF00":"#30303099";this.privacyView=new P(this.vm.adInfo,this.vm.screenOrientation,e,"#FFFFFF","1 1 1 #00000030"),this.privacyView.style={alignSelf:"stretch",marginTop:10},0==this.vm.screenOrientation?(this.privacyView.style={marginLeft:16,marginRight:16,flexGrow:1},this.expcetedHeight+=78):(this.privacyView.style={marginLeft:16,width:200},this.expcetedHeight+=114,a=!0),t.appendChild(this.privacyView),this.privacyView.clickCallback=(t,e)=>{this.vm.handleOpenURL(t,e)}}this.getHasGuideBar()&&(this.guideBar=new M,this.guideBar.style={alignSelf:i,marginTop:10},t.appendChild(this.guideBar),a||(this.expcetedHeight+=38))}$(this.vm,this.vm.$attrsPath.isMuted,(t=>{this.setMuted(t)})),$(this.vm,this.vm.$attrsPath.playFailed,(t=>{t&&this.playFailed()})),$(this.vm,this.vm.$attrsPath.playFinished,(t=>{t&&this.finishPlay()})),$(this.vm,this.vm.$attrsPath.currentPlaybackTime,(t=>{t&&this.countDown(t)})),$(this.vm,this.vm.$attrsPath.hasGetDeepGift,(t=>{t&&this.getDeepReward(t)})),$(this.vm,this.vm.$attrsPath.hasInstallTargetApp,(t=>{t&&!this.vm.isCovertTask()&&(this.updateRewardState(!0),this.updateActionBarState(4,!0))})),$(this.vm,this.vm.$attrsPath.hasShowPlayend,(t=>{t&&(this.vm.isCovertTask()&&this.vm.giveRewardTime>0&&this.updateRewardState(!0),this.updateActionBarState(4))})),Z().on("player_mute_change",(t=>{this.setMuted(t.muted),this.vm.isMuted=t.muted})),1!=this.vm.topbarModelType&&this.setupAction()}setupAction(){this.topBarContainer.addEventListener("tap",(t=>{this.vm.convertForOtherArea(4==this.actionState?2:3,function(t,e){let i={x:0,y:0};if(k.supportMinimumTKVersion("4.0.0")){const a=e.getLocationOnScreen(),n=t.position;if(!a||!n)return i;n.x=parseFloat((n.x+"").replace("dp","")),n.y=parseFloat((n.y+"").replace("dp","")),i={x:a.x+n.x,y:a.y+n.y}}return i}(t,this.topBarContainer),b.CARD_PAGE_CLICK)})),this.vm.isSlideClick()&&function(t,e){if(v(e))return;if(!I())return void t.addEventListener("swipe",(t=>{e()}));let i=null,a=t=>{if("down"==t.type)i=t;else if("up"==t.type&&null!=i){let a=t.position.x,n=t.position.y,s=i.position.x,l=i.position.y;(Math.abs(a-s)>=10||Math.abs(n-l)>=10)&&e()}};t.addEventListener("down",a),t.addEventListener("up",a)}(this.topBarContainer,(()=>{this.vm.convertForOtherArea(4==this.actionState?2:3,{x:0,y:0},b.CARD_SWIPE_CONVERT)}))}shouldShowNormalCallBtn(){return!0}handleCallImpressionWhenPlay(){this.callImpressionWhenPlayCalled||(this.callImpressionWhenPlayCalled=!0,this.vm.handleCallImpressionOnPlay())}updateActionBarStateInner(t,e=!1){}updateActionBarState(t,e=!1){if(!e&&t<=this.actionState)return;4==t&&this.guideBar&&this.guideBar.setVisibility("hidden"),this.actionState=t,this.leftContainer.removeAll(),this.rightContainer.removeAll(),this.updateActionBarStateInner(t,e);let i=this;if(4==this.actionState)clearTimeout(this.callActionTimer),this.closeBtn&&(2==this.vm.needShowPlayEndCloseBtn?this.hidePlayEndCloseBtn():this.vm.isDelayShowEndClose()&&!this.playEndCloseHadDelayShow?(this.hidePlayEndCloseBtn(),0==this.closeTimer&&(this.closeTimer=setTimeout((()=>{this.playEndCloseHadDelayShow=!0,this.showPlayEndCloseBtn()}),1e3*this.vm.getCloseDelaySeconds()))):this.showPlayEndCloseBtn(),this.vm.getPlayEndCallDescription&&this.vm.handleCallImpressionOnFinish());else if(this.callContainer&&this.shouldShowNormalCallBtn()){const t=this.vm.getPlayDetailCallDescription(),e=this.vm.getPlayDetailCallBtnShowTime();t&&(this.hasShowCallBtn||(0==e?this.hasShowCallBtn=!0:this.callActionTimer||(this.callActionTimer=setTimeout((()=>{i.callContainer.appendChild(i.getCallBtn()),i.callLabel.setText(t),i.layout(),i.handleCallImpressionWhenPlay(),i.hasShowCallBtn=!0}),1e3*e))),this.hasShowCallBtn&&(this.callContainer.removeAll(),this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t),this.handleCallImpressionWhenPlay()))}this.layout()}updateCountDownText(){this.countDownLabel&&this.leftTime>=0&&(this.countDownLabel.setText(this.leftTime+""),this.layout())}showPlayEndCloseBtn(){this.closeBtn&&!this.hasShowCloseBtn&&(this.closeBtn.style={display:"flex"},this.hasShowCloseBtn=!0,k.isAndroid()||this.layout())}hidePlayEndCloseBtn(){this.closeBtn&&(this.closeBtn.style={display:"none"})}updateRewardState(t){this.hasReward=t&&this.vm.isRewardVideo(),this.hasReward&&this.vm&&this.vm.impressionCheckResult&&this.vm.handleHasGift()}getHasGuideBar(){return!1}countDown(t){var e,i,a,n,s,l;t<this.currentTime||this.vm.isDeepRewardTask()&&this.hasDeepReward||(this.currentTime=t,t=Math.floor(t),this.leftTime=this.rewardSecond-t<1?1:this.rewardSecond-t,k.supportMinimumTKVersion("5.0.1")&&this.vm.isNeedCheck&&2==this.vm.getRealAdStyle()&&(this.vm.isNeedSeverCheck=this.isNeedSeverCheck(),this.callBackAdvanceMs=(null===(i=null===(e=this.vm.adInfo.adRewardInfo)||void 0===e?void 0:e.callBackStrategyInfo)||void 0===i?void 0:i.rewardAdvanceSwitch)?(null===(n=null===(a=this.vm.adInfo.adRewardInfo)||void 0===a?void 0:a.callBackStrategyInfo)||void 0===n?void 0:n.callBackAdvanceMs)/1e3:0,t>=this.rewardSecond-this.vm.giveRewardTime-this.callBackAdvanceMs&&(null===(l=null===(s=this.vm.adInfo.adRewardInfo)||void 0===s?void 0:s.callBackStrategyInfo)||void 0===l?void 0:l.rewardAdvanceSwitch)&&!this.isFinishAdvance&&this.vm.impressionCheckResult&&this.vm.isNeedCheck&&this.vm.adInfo.adConversionInfo.callbackUrlInfo&&(this.vm.isNeedSeverCheck?(this.vm.severCheckState=1,this.secverCheck()):this.updateRewardState(!0),this.isFinishAdvance=!0)),t>=this.rewardSecond-this.vm.giveRewardTime?(this.updateRewardState(!0),this.updateActionBarState(2)):(this.updateCountDownText(),t>=this.skipSecond?this.updateActionBarState(1):this.updateActionBarState(0)))}isNeedSeverCheck(){var t,e,i,a,n,s;return(null===(e=null===(t=this.vm.adInfo.adRewardInfo)||void 0===t?void 0:t.callBackStrategyInfo)||void 0===e?void 0:e.serverCheckSwitch)&&(null===(a=null===(i=this.vm.adInfo.adRewardInfo)||void 0===i?void 0:i.callBackStrategyInfo)||void 0===a?void 0:a.callBackAdvanceMs)>0&&(null===(s=null===(n=this.vm.adInfo.adRewardInfo)||void 0===n?void 0:n.callBackStrategyInfo)||void 0===s?void 0:s.rewardAdvanceSwitch)}secverCheck(){const t=new TKNetwork;t.isAddCommonParameters=1,t.method="POST",t.url="/rest/e/v3/open/checkReward";try{i=2,a=this.vm.adInfo,Tt({category:"ad_client_apm_log",biz:"AD_REWARD",sub_biz:"OTHER",rate:.01,suffixRatio:"",event_id:"ad_sdk_reward_check_result",primaryKey:"web_log",type:"EXECUTION_BIZ_TIME",msg:{check_type:i,request_state:1,creative_id:a.adBaseInfo.creativeId,enviType:1}});let s=JSON.parse(this.vm.adInfo.adConversionInfo.callbackUrlInfo);s.checkType=2;const l={callbackUrlInfo:JSON.stringify(s),impInfo:[{posId:this.vm.posId,adNum:1,adStyle:2}]};try{var e=JSON.parse(JSON.stringify(this.vm.adInfo.serverExt));v(e)||(delete e._tkmvvm_observed,delete e.nativeID,l.serverExt=e)}catch(n){}t.params=l;const o=p();t.request(((t,e)=>{console.log("[caijie] tknetwork  response "+t+" error "+e);const i=p()-o;if(!e)try{const e=JSON.parse(t).data,a=JSON.parse(e);1==a.result?(this.updateRewardState(!0),this.vm.severCheckState=1):this.vm.severCheckState=2,function(t,e,i,a,n){Tt({category:"ad_client_apm_log",biz:"AD_REWARD",sub_biz:"OTHER",rate:.01,suffixRatio:"",event_id:"ad_sdk_reward_check_result",primaryKey:"status",type:"EXECUTION_BIZ_TIME",msg:{check_type:t,request_state:2,creative_id:e.adBaseInfo.creativeId,enviType:1,data_load_interval_duration_ms:i,message:n||"",code:a}})}(2,this.vm.adInfo,i,a.result,a.errorMsg)}catch(n){}}))}catch(n){}var i,a}getDeepReward(t){this.vm.isDeepRewardTask()&&(this.hasDeepReward=t,4==this.actionState?(this.updateCountDownText(),this.layout()):this.updateActionBarState(3))}finishPlay(){this.updateRewardState(!0),this.updateActionBarState(4,!0),this.vm.handlePlayEnd(!1)}playFailed(){this.updateActionBarState(4,!0),this.vm.handlePlayEnd(!0)}setMuted(t){this.soundBtn&&(t?this.soundBtn.setImageSrc(this.vm.getResourceRoot()+"icon_ksad_mute.png"):this.soundBtn.setImageSrc(this.vm.getResourceRoot()+"icon_ksad_sound.png"))}hasFeedbackBtn(){return!1}getRightContainer(){let t=new TKView,e={height:_t,marginRight:16-this.btnMargin/2,alignItems:"center",flexDirection:"row",justifyContent:"center"};return t.style=e,t}getCallContainer(){let t=new TKView;return t.style={height:"100%",alignItems:"center",justifyContent:"center",flexDirection:"row"},t.enabled=!0,this.callContainer=t,t}getSoundBtn(){this.soundBtn=new R,this.soundBtn.setImageSize({width:22,height:22});let t={width:_t,height:_t,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2,borderRadius:14,backgroundColor:"#30303099"};return this.soundBtn.style=t,this.setMuted(this.vm.isMuted),this.soundBtn.addEventListener("tap",(t=>{this.vm.handleMuteChange(!this.vm.isMuted),this.setMuted(this.vm.isMuted)})),this.soundBtn}getSkipBtn(){let t=new R,e={height:_t,borderRadius:14,backgroundColor:"#30303099",marginRight:this.btnMargin/2,marginLeft:this.btnMargin/2};if(t.style=e,this.vm.getSkipTips()){t.style={paddingLeft:12,paddingRight:12};let e=new TKText;e.style={fontSize:14,color:"#FFFFFF"},e.setText(this.vm.getSkipTips()),t.appendChild(e)}else t.style={width:_t},1==this.vm.getSkipType()?t.setImageSrcAndSize(this.vm.getResourceRoot()+"icon_ksad_skip.png",{width:_t,height:_t}):t.setImageSrcAndSize(this.vm.getResourceRoot()+"icon_ksad_close.png",{width:12,height:12});return t.addEventListener("tap",(t=>{this.onSkipClick()})),this.skipBtn=t,t}onSkipClick(){let t=this.skipNeedPromopt&&(this.vm.isDeepRewardTask()?!this.hasDeepReward:!this.hasReward),e=this.vm.isRewardVideo();console.log("jky topbar view onSkipClick showPromopt: "+t),this.vm.handleSkip(t,e,this.skipSecond)}getFeedbackBtn(){this.feedbackBtn=new TKView,this.feedbackBtn.style={height:_t,borderRadius:14,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2,backgroundColor:"30303099",paddingLeft:8,paddingRight:8,alignItems:"center",justifyContent:"center"};let t=new TKText;return t.style={fontSize:14,color:"#FFFFFF"},t.setText("反馈"),this.feedbackBtn.appendChild(t),this.feedbackBtn.addEventListener("tap",(()=>{this.vm.handleOpenFeedback()})),this.feedbackBtn}getCloseBtn(){let t=new R,e={width:_t,height:_t};return e.marginLeft=this.btnMargin/2,e.marginRight=this.btnMargin/2,e.borderRadius=14,e.backgroundColor="#30303099",t.style=e,t.setImageSrcAndSize(this.vm.getResourceRoot()+"icon_ksad_close.png",{width:12,height:12}),t.addEventListener("tap",(()=>{this.vm.handleClose()})),this.closeBtn=t,$(this.vm,this.vm.$attrsPath.needShowPlayEndCloseBtn,(t=>{let e=this.vm.getCloseDelaySeconds();console.log("jky topbar view onBind needShowPlayEndCloseBtn: "+t+", closeBtnDelayTime: "+e),1==t&&e<=0&&this.showPlayEndCloseBtn()})),t}getGiftBtn(t=!0){let e=new R;return e.setImageSize({width:_t,height:_t}),e.style={width:_t,height:_t,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2},t&&e.setImageSrc(this.vm.getResourceRoot()+"icon_ksad_gift.png"),e.addEventListener("tap",(()=>{this.vm.handleGiftClick()})),this.giftBtn=e,e}getCountDownLabel(){let t=new TKText;return t.style={color:"#FFFFFF",fontSize:14,textAlign:"center",height:"100%",textLineClamp:1,minimumTextScaleFactor:.5},t}getCountDownHasBg(){return!0}getCountDownBtn(){return this.countDownBtn=new TKView,this.countDownBtn.style={height:_t,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2},this.getCountDownHasBg()&&(this.countDownBtn.style={borderRadius:14,backgroundColor:"#30303099"}),this.countDownBtn.style={width:_t},this.countDownLabel=this.getCountDownLabel(),this.countDownLabel.style={width:"100%"},this.countDownBtn.appendChild(this.countDownLabel),this.updateCountDownText(),this.countDownBtn}getGiftCountDownBtn(){this.giftCountDownBtn=new TKView,this.giftCountDownBtn.style={marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2,height:_t,borderRadius:14,backgroundColor:"#30303099"},this.giftCountDownBtn.addEventListener("tap",this.vm.handleGiftClick);let t=this.getGiftBtn(!1);return t.style={marginTop:2,marginLeft:2,width:24,height:24,borderRadius:12,backgroundColor:"#FE3666"},t.setImageSize({width:21,height:21}),t.setImageSrc(this.vm.getResourceRoot()+"icon_ksad_gift_new.png"),this.giftCountDownBtn.appendChild(t),this.countDownLabel=this.getCountDownLabel(),this.countDownLabel.style={marginTop:-26,marginLeft:26+this.btnMargin/2,marginRight:this.btnMargin},this.giftCountDownBtn.appendChild(this.countDownLabel),this.updateCountDownText(),this.giftCountDownBtn}getCallBtn(){this.callBtn=new TKView,this.callBtn.setBackgroundColor("#30303099"),this.callBtn.style={paddingLeft:10,paddingRight:10,height:_t,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2,borderRadius:14,flexDirection:"row",justifyContent:"center",alignItems:"center"},this.callBtn.addEventListener("tap",(t=>{this.vm.handleCallClick(4==this.actionState)})),this.callLabel=new TKText,this.callLabel.nativeID="topBarCallLabel",this.callLabel.style={fontSize:14,color:"#FFFFFF"},this.callBtn.appendChild(this.callLabel);let t=new TKImage;return t.style={width:6,height:11,marginLeft:6},t.setSrc(this.vm.getResourceRoot()+"icon_ksad_white_right_arrow.png"),this.callBtn.appendChild(t),this.callBtn}}class wt extends vt{updateCountDownText(){this.countDownLabel&&this.leftTime>=0&&(this.vm.isDeepRewardTask()?this.hasDeepReward?this.countDownLabel.setText("已获得全部奖励"):this.hasReward?this.countDownLabel.setText("已获得奖励1/2"):4==this.actionState?this.countDownLabel.setText("未获得奖励"):this.countDownLabel.setText(this.leftTime+"s后获得奖励1"):this.countDownLabel.setText(this.leftTime+""),this.layout())}updateActionBarStateInner(t,e=!1){switch(t){case 0:this.vm.isDeepRewardTask()?this.leftContainer.appendChild(this.getGiftCountDownBtn()):this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 1:this.vm.isDeepRewardTask()?this.leftContainer.appendChild(this.getGiftCountDownBtn()):this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 2:case 3:this.vm.isDeepRewardTask()?this.leftContainer.appendChild(this.getGiftCountDownBtn()):this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:{this.vm.isDeepRewardTask()?this.leftContainer.appendChild(this.getGiftCountDownBtn()):this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class St extends vt{updateActionBarStateInner(t,e=!1){switch(t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 1:this.leftContainer.appendChild(this.getSkipBtn()),this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 2:case 3:this.leftContainer.appendChild(this.getSkipBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.hasReward&&this.rightContainer.appendChild(this.getGiftBtn());break;case 4:{this.leftContainer.appendChild(this.getCloseBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.hasReward&&this.rightContainer.appendChild(this.getGiftBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class yt extends vt{getCountDownHasBg(){return!0}getSmallGiftView(){let t=new TKImage;return t.style={marginLeft:5,width:18,height:18,marginRight:5},t.setSrc(this.vm.getResourceRoot()+"icon_ksad_gift_small.png"),t}getCloseBtn(){let t=super.getCloseBtn();return 4==this.actionState||(t.style={marginLeft:0,marginRight:0,backgroundColor:"#00000000"}),t}getSkipBtn(){let t=super.getSkipBtn(),e=8;return this.actionState>=4&&(e=12),t.style={paddingLeft:e,paddingRight:12,marginRight:0,marginLeft:0,backgroundColor:"#00000000"},t}getSkipTips(){return"跳过"}getRightContainer(){let t=super.getRightContainer();return t.style={backgroundColor:"#30303099",borderRadius:14,marginRight:16},t}shouldShowNormalCallBtn(){return!1}showCallSep(){this.callSep&&this.callSep.setVisibility("visible")}updateActionBarStateInner(t,e){this.rightContainer.style=4==t?{backgroundColor:"#00000000"}:{backgroundColor:"#30303099"}}}class kt extends yt{updateCountDownText(){this.countDownLabel&&this.leftTime>=0&&(this.countDownLabel.setText(this.leftTime+"秒后可领取奖励"),this.layout())}getCountDownLabel(){let t=super.getCountDownLabel();return t.style={width:118},t}getCallBtn(){if(4==this.actionState)return super.getCallBtn();const t=new TKView;t.style={height:_t,flexDirection:"row",justifyContent:"center",alignItems:"center"};let e=new TKImage;e.style={width:20,height:20,marginLeft:5,marginRight:4},e.src=this.vm.getResourceRoot()+"icon_ksad_gift_small.png",t.appendChild(e),t.addEventListener("tap",(t=>{}));let i=this.getCountDownLabel();t.appendChild(i),this.countDownLabel=i,this.updateCountDownText();let a=new TKView;return a.setBackgroundColor("#FFFFFF33"),a.style={width:.5,height:12,marginLeft:8},a.setVisibility("hidden"),this.callSep=a,t.appendChild(a),t}getSkipBtn(){let t=super.getSkipBtn(),e=8;return this.actionState>1&&(e=12),t.style={paddingLeft:e,paddingRight:12,marginRight:0,marginLeft:0,backgroundColor:"#00000000"},t}updateActionBarStateInner(t,e=!1){switch(super.updateActionBarStateInner(t,e),t){case 0:this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.callContainer.appendChild(this.getCallBtn());break;case 1:this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallBtn()),this.rightContainer.appendChild(this.getSkipBtn()),this.showCallSep();break;case 2:case 3:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:{this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class Lt extends yt{updateCountDownText(){this.countDownLabel&&this.leftTime>=0&&(this.countDownLabel.setText(this.leftTime+"秒后可领取奖励"),this.layout())}getCountDownLabel(){let t=super.getCountDownLabel();return t.style={width:118},t}hasFeedbackBtn(){return!0}getSkipBtn(){let t=super.getSkipBtn(),e=8;return this.actionState>1&&(e=12),t.style={paddingLeft:e,paddingRight:12,marginRight:0,marginLeft:0,backgroundColor:"#00000000"},t}getCallBtn(){if(4==this.actionState)return super.getCallBtn();const t=new TKView;t.style={height:_t,flexDirection:"row",justifyContent:"center",alignItems:"center"};let e=new TKImage;e.style={width:20,height:20,marginLeft:5,marginRight:4},e.src=this.vm.getResourceRoot()+"icon_ksad_gift_small.png",t.appendChild(e),t.addEventListener("tap",(t=>{}));let i=this.getCountDownLabel();t.appendChild(i),this.countDownLabel=i,this.updateCountDownText();let a=new TKView;return a.setBackgroundColor("#FFFFFF33"),a.style={width:.5,height:12,marginLeft:8},a.setVisibility("hidden"),this.callSep=a,t.appendChild(a),t}updateActionBarStateInner(t,e=!1){switch(super.updateActionBarStateInner(t,e),t){case 0:this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.callContainer.appendChild(this.getCallBtn());break;case 1:this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn()),this.callContainer.appendChild(this.getCallBtn()),this.showCallSep();break;case 2:case 3:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getSkipBtn()),this.showCallSep();break;case 4:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getCloseBtn())}}}class At extends vt{updateCountDownText(){this.countDownLabel&&this.leftTime>=0&&(this.countDownLabel.setText(this.leftTime+"秒后可领取奖励"),this.layout())}getCountDownBtn(){return this.countDownBtn=new TKView,this.countDownBtn.style={height:_t,marginLeft:this.btnMargin/2,marginRight:this.btnMargin/2},this.getCountDownHasBg()&&(this.countDownBtn.style={borderRadius:14,backgroundColor:"#30303099"}),this.countDownLabel=this.getCountDownLabel(),this.countDownLabel.style={marginLeft:12,marginRight:12},this.countDownBtn.appendChild(this.countDownLabel),this.updateCountDownText(),this.countDownBtn}updateActionBarStateInner(t,e=!1){switch(t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 1:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 2:case 3:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:{this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class Dt extends vt{updateActionBarStateInner(t,e=!1){switch(t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 1:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 2:case 3:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:{this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class Rt extends yt{getCallBtn(){if(4==this.actionState)return super.getCallBtn();this.callBtn=new TKView,this.callBtn.style={height:_t,flexDirection:"row",justifyContent:"center",alignItems:"center"};let t=new TKImage;t.style={width:20,height:20,marginLeft:5,marginRight:4},t.src=this.vm.getResourceRoot()+"icon_ksad_gift_small.png",this.callBtn.appendChild(t),this.actionState<4&&(this.callLabel=new TKText,this.callLabel.style={fontSize:14,color:"#FFFFFF",marginRight:8},this.callBtn.appendChild(this.callLabel),this.callLabel.setText("观看完视频可获取奖励")),this.callBtn.addEventListener("tap",(t=>{}));let e=new TKView;return e.setBackgroundColor("#FFFFFF33"),e.style={width:.5,height:12},e.setVisibility("hidden"),this.callSep=e,this.callBtn.appendChild(e),this.callBtn}updateActionBarStateInner(t,e=!1){switch(super.updateActionBarStateInner(t,e),t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallBtn());break;case 1:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallBtn()),this.rightContainer.appendChild(this.getSkipBtn()),this.showCallSep();break;case 2:case 3:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallBtn()),this.rightContainer.appendChild(this.getSkipBtn()),this.showCallSep();break;case 4:{this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class bt extends vt{getHasGuideBar(){return!0}hasFeedbackBtn(){return!0}updateActionBarStateInner(t,e=!1){switch(t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn());break;case 1:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getSkipBtn());break;case 2:case 3:this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:this.hasReward&&this.leftContainer.appendChild(this.getGiftBtn()),this.leftContainer.appendChild(this.getFeedbackBtn()),this.rightContainer.appendChild(this.getCloseBtn())}}}class Et extends vt{updateActionBarStateInner(t,e=!1){switch(t){case 0:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer());break;case 1:this.leftContainer.appendChild(this.getCountDownBtn()),this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 2:case 3:this.leftContainer.appendChild(this.getSoundBtn()),this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getSkipBtn());break;case 4:{this.rightContainer.appendChild(this.getCallContainer()),this.rightContainer.appendChild(this.getCloseBtn());const t=this.vm.getPlayEndCallDescription();t&&(this.callContainer.appendChild(this.getCallBtn()),this.callLabel.setText(t));break}}}}class Bt{constructor(t,e,i,a,n,s,l){this.soundEnable=!1,this.ignoreCompliance=!1,this.disableDownloadDialog=!1,this.disableLeaveConfirm=!1,this.disableVideoWebPage=!1,this.disableActivityMiddlePage=!1,this.originAdInfo=t,this.deviceInfo=e,this.serverConfig=i,this.creativeId=s;let o=rt(this.originAdInfo,s);this.adInfo=ht(o),this.adCacheId=l||Tachikoma.env.adCacheId,this.originAdInfo.adCacheId=this.adCacheId,this.appId=n||Tachikoma.env.appId,this.scene=a||Tachikoma.env.adScene}}var Nt=function(t,e,i,a){return new(i||(i=Promise))((function(n,s){function l(t){try{r(a.next(t))}catch(e){s(e)}}function o(t){try{r(a.throw(t))}catch(e){s(e)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(l,o)}r((a=a.apply(t,e||[])).next())}))};class Kt{static sendLog(t,e,i,a){this.log(t,null,e,i,a)}static log(t,e,i,a,n){(i=i||{}).renderContainer=1;const s={actionType:t,payload:JSON.stringify(i)};if(n&&(s.creativeId=n),a)if(null==a?void 0:a.adCacheId)s.adCacheId=null==a?void 0:a.adCacheId;else{const t=rt(a,n);s.adTemplate=JSON.stringify(t)}e&&(s.clickInfo=e),D.sendLog(s)}static convertIfNeeded(t,e,i,a,n,s,o,r,h){if(!gt(e,i))return;let d=l;v(d)||(s||(s=new nt),v(s.template_id)&&(s.template_id=d.templateId),v(s.template_version)&&(s.template_version=d.templateVersion)),this.convert(i,a,n,t,s,o,r,h)}static convert(t,e,i,a,n,s,l,o){return Nt(this,void 0,void 0,(function*(){const r=ht(rt(c(),o));if(!r||!gt(r,t))return void console.log("tkloadcontroller invalid convert:"+r+":"+t);let p,g;if(p=v(n)?{itemClickType:i,renderContainer:1}:{itemClickType:i,renderContainer:1,clientExtData:JSON.stringify(n)},v(s)||Object.assign(p,s),Z().emit("ad_convert_event",{clickType:i}),e?(g={x:e.x,y:e.y},e.width&&(g.width=e.width),e.height&&(g.height=e.height)):g={},console.log("tkloadcontroller begin conversion"),this.matchTKConversion()){console.log("tkloadcontroller match conversion service");let i=KSAdTKBundleService.getInstance("CommercialKSAdConversionService","conversion-service",null);if(i){console.log("tkloadcontroller service instance is:"+i);let n=-1;(null==l?void 0:l.convertType)&&(n=l.convertType);const s=new Bt(c(),h(),d());return s.currentPlayTime=this.sCurrentPlayTimeMs,s.clickScene=a,s.convertType=n,s.creativeId=o,s.clickArea=t,s.soundEnable=this.sSoundEnable,(null==l?void 0:l.liveItemId)&&(s.liveItemId=l.liveItemId),D.clickActionBase({isCallbackOnly:!0},I),void i.handleAdClick(JSON.stringify(s),(t=>{if(console.log("tkloadcontroller  handle click finish:"+t.success),this.sCurrentPlayTimeMs>0&&(p.playedDuration=this.sCurrentPlayTimeMs),p.convertType=n,t.reportExtraParam)try{let e=JSON.parse(p.clientExtData);e.clientExtData=JSON.parse(t.reportExtraParam),p.clientExtData=JSON.stringify(e)}catch(i){!function(t,e="",i=""){Tt({category:"ad_client_error_log",biz:"TACHIKOMA",sub_biz:"OTHER",rate:.1,suffixRatio:"",event_id:"ad_tk_render_performance",primaryKey:"unknown",type:"OTHER",msg:{render_state:3,error_reason:u(t),template_id:v(i)?C().templateId:i,version_code:v(e)?C().templateVersionCode:e}})}(i)}console.log("tkloadcontroller log payload:"+JSON.stringify(p)),this.log(2,e,p)}))}console.log("tkloadcontroller conversion service failed"),this.loadConversionServiceIfNeeded((t=>{console.log("tkloadcontroller service load result:"+t)}))}var I;console.log("tkloadcontroller mismatch conversion service"),function(t,e,i,a,n){D.clickActionBase(Object.assign(Object.assign({area:t,logParam:e},i),{creativeId:a}),n)}(t,{payload:JSON.stringify(p),clickInfo:g,sceneType:a,itemClickType:i},l,o,(i=>{1!=i.result&&(this.log(2,e,p),D.convert(1==t))}))}))}static expose(t){this.log(1,null,t)}static exposeElement(t,e){(e=e||{}).elementType=t,this.log(140,null,e)}static clickElement(t){const e={elementType:t};this.log(141,null,e)}static convertWithTypeIfNeeded(t,e,i,a,n){this.convertWithType(e,i,a,n)}static convertWithType(t,e,i,a){this.convert(t,e,i,0,null,null,{convertType:a})}static convertWithTypeIfNeededNew(t,e,i,a,n,s){gt(t,e)&&this.convertWithTypeNew(e,i,a,n,s)}static convertWithTypeNew(t,e,i,a,n){this.convert(t,e,i,0,null,n,{convertType:a})}static convertNew(t,e,i,a,n,s){this.convert(e,{x:i.x,y:i.y,width:a.width,height:a.height},n,t,null,s)}static playNSecond(t){let e={photoPlaySecond:t};this.log(402,null,e)}static skip(){this.log(501,null,null)}static loadConversionServiceIfNeeded(t){this.matchTKConversion()&&KSAdTKBundleService.loadBundle("CommercialKSAdConversionService",t),t&&t(!1)}static matchTKConversion(){var t,e,i,a;return console.log("tkloadcontroller  tkconversionswitch:"+(null===(e=null===(t=d())||void 0===t?void 0:t.abConfig)||void 0===e?void 0:e.tkConversionSwitch)),console.log("tkloadcontroller  tkconversionswitch:"+JSON.stringify(h())),(null===(a=null===(i=d())||void 0===i?void 0:i.abConfig)||void 0===a?void 0:a.tkConversionSwitch)&&k.supportCurrentTKVersion("5.1.1")}static updateVideoPlayStatus(t,e,i,a){!function(t,e,i,a){D.callNativeWithCallback("updateVideoPlayStatus",{status:t,errorCode:e||0,errorReason:i||"",currentTime:a||0})}(t,e,i,a),"progress"==t&&a&&(this.sCurrentPlayTimeMs=a)}}Kt.sSoundEnable=!1;class Ot{constructor(){this.renderCalled=!1,this.renderStatusCalled=!1,this.rootView=new TKView,this.rootView.style={width:"100%",height:"100%"}}render(){return!this.renderCalled&&(this.renderCalled=!0,!0)}updateRenderStatus(t,e=""){this.renderCalled&&!this.renderStatusCalled&&(this.renderStatusCalled=!0,D.pageStatus(t,e),this.registerNativeId(),Kt.loadConversionServiceIfNeeded((t=>{})))}registerNativeId(){1==Tachikoma.env.isDebug&&k.supportMinimumTKVersion("4.0.7")&&!k.isAndroid()&&(this.startConfig(),D.registerNativeId((t=>{t&&t.data&&this.startConfig()})))}startConfig(){this.configNativeIdTimer&&clearTimeout(this.configNativeIdTimer),this.configNativeIdTimer=setTimeout((()=>{w(this)}),120)}}class Pt extends z{constructor(){super(),this.$attrsPath=new Proxy(this,{get:(t,e)=>Mt(t,e)})}getData(t){}}function Mt(t,e){return new Proxy({$vm:t,$bind_path:e},{get:(i,a)=>"string"!=typeof a||"function"==typeof i[a]||0==a.indexOf("$")?Reflect.get(i,a):Mt(t,e+"."+a)})}class Vt extends Pt{constructor(){super(...arguments),this.isNeedCheck=!1,this.topbarModelType=0,this.needShowPlayEndCloseBtn=0,this.hasCallbackGift=!1,this.isMuted=!1,this.playFailed=!1,this.playFinished=!1,this.currentPlaybackTime=0,this.hasGetDeepGift=!1,this.hasInstallTargetApp=!1,this.hasShowPlayend=!1,this.giveRewardTime=0,this.impressionCheckResult=!0,this.isNeedSeverCheck=!1,this.severCheckState=0}checkDataValid(){return!!this.adInfo}getVideoDuration(){return ct(this.adInfo)}isDownloadAd(){return 1==this.adInfo.adBaseInfo.adOperationType}isShowPrivacy(){return function(t){var e;try{return k.isAndroid()&&1==t.adBaseInfo.adOperationType&&(null===(e=t.downloadSafeInfo.complianceInfo)||void 0===e?void 0:e.titleBarTextSwitch)>0}catch(i){}return!1}(this.adInfo)}isDeepRewardTask(){return 2==this.adInfo.adBaseInfo.taskType||3==this.adInfo.adBaseInfo.taskType}isCloseBtnHide(){try{let t=this.adInfo.adMatrixInfo.tag;if(t)for(let e=0;e<t.length;e++){let i=t[e];if("playEndClose"==i.type&&i.isHide)return!0}}catch(t){}return!1}isRewardVideo(){return 2==this.adStyle||12==this.adStyle}isSkipToCloseAd(){try{return this.isRewardVideo()?this.adInfo.adRewardInfo.rewardVideoEndCardSwitch:this.adInfo.fullScreenVideoInfo.fullScreenEndCardSwitch}catch(t){return!1}}getRewardTime(){return ut(this.adInfo)}isShowSkipRightNow(){return this.isRewardVideo()?Math.min(this.getSkipShowTime(),this.getRewardTime())<=0:this.getSkipShowTime()<=0}getSkipConfirmSwitch(){let t=!0;try{t=null==this.adInfo.adStyleConfInfo.rewardSkipConfirmSwitch||this.adInfo.adStyleConfInfo.rewardSkipConfirmSwitch}catch(e){}return t}getSkipShowTime(){let t=null;try{if(this.isRewardVideo())try{t=this.adInfo.adRewardInfo.skipShowTime,t<0&&(t=this.getVideoDuration())}catch(e){t=this.configInfo.appConfig.rewardSkipShowTime}else t=this.adInfo.adStyleConfInfo.fullScreenSkipShowTime}catch(e){}return null!=t&&null!=t||(t=5),Math.min(this.getVideoDuration(),t)}getSkipTips(){let t=null;try{t=this.isRewardVideo()?this.configInfo.appConfig.rewardSkipTips:this.configInfo.appConfig.fullscreenSkipTips}catch(e){}return t&&0!=t.length?t:null}getSkipType(){let t=0;try{t=this.isRewardVideo()?this.configInfo.appConfig.rewardSkipType:this.configInfo.appConfig.fullscreenSkipType}catch(e){3==this.adStyle&&(t=1)}return t}getPlayDetailCallDescription(){let t=null;try{t=this.adInfo.adMatrixInfo.adDataV2.playCardStyleInfo.detailTopToolBarInfo.callButtonDescription}catch(e){}return f(t)||(t="立即获取"),t}getPlayEndCallDescription(){let t=null;try{this.adInfo.adMatrixInfo.adDataV2.dynamicAdStyleInfo.playEndInfo.endTopToolBarInfo.callButtonDescription.length>0&&(t=this.adInfo.adMatrixInfo.adDataV2.dynamicAdStyleInfo.playEndInfo.endTopToolBarInfo.callButtonDescription)}catch(e){console.log("no adMatrixInfo.adDataV2.dynamicAdStyleInfo.playEndInfo.endTopToolBarInfo.callButtonDescription returned")}return t}getPlayDetailCallBtnShowTime(){let t=0;try{t=this.adInfo.adMatrixInfo.adDataV2.dynamicAdStyleInfo.playDetailInfo.detailTopToolBarInfo.callButtonShowTime}catch(e){console.log("no adMatrixInfo.adDataV2.dynamicAdStyleInfo.playDetailInfo.detailTopToolBarInfo.callButtonShowTime returned")}return t}getCloseDelaySeconds(){let t=0;try{t=this.adInfo.adStyleConfInfo.closeDelaySeconds}catch(e){}return t}isDelayShowEndClose(){return this.getCloseDelaySeconds()>0}getTopbarStyle(){if(3!=this.adStyle&&1!=this.adInfo.adBaseInfo.taskType&&4!=this.adInfo.adBaseInfo.taskType&&0!=this.adInfo.adBaseInfo.taskType)return 1;let t=-1;try{t=this.adInfo.adMatrixInfo.adDataV2.playCardStyleInfo.detailTopToolBarInfo.style}catch(e){}return!k.supportMinimumVersion("3.3.22","3.3.29")&&t>9?0:t}getResourceRoot(){return"image/ksad-video-top-bar/"}handleOpenURL(t,e){D.openURL(t,e)}handleOpenFeedback(){if(this.hasShowFeedback)return t="您已经提交过反馈了哦~",void D.callNativeWithCallback("showToast",{message:t});var t;this.hasShowFeedback=!0,D.showTKDialog("ksad-feed-back-card");let e={actionType:141,payload:JSON.stringify({elementType:194,buttonType:4})};D.sendLog(e)}handleCallImpressionOnFinish(){}handleCallImpressionOnPlay(){}handleCallClick(t){}handleGiftClick(){}convertForOtherArea(t,e,i){}handleSkip(t,e,i){}handleClose(){D.closeVideo(!1)}handleMuteChange(t){}handleHasGift(){this.hasCallbackGift||(this.hasCallbackGift=!0,D.hasReward(this.severCheckState))}handlePlayEnd(t){D.showPlayEnd(t),this.hasShowPlayend=!0}getTaskType(){var t;return null===(t=this.rewardTaskInfo)||void 0===t?void 0:t.taskType}isCovertTask(){return 1==this.getTaskType()}isSlideClick(){var t;return!!(null===(t=this.adInfo.adMatrixInfo.adDataV2.dynamicAdStyleInfo)||void 0===t?void 0:t.slideClick)}getRealAdStyle(){let t=Tachikoma.env.adStyle;return t||(t=this.adStyle),t}}class xt extends Vt{getData(t){let e=[];e.push(D.getKsAdDataAsync()),e.push(D.getDeviceInfoAsync()),e.push(D.getKsAdConfigAsync()),e.push(D.getContainerLimitAsync()),e.push(D.getScreenOrientationAsync()),Promise.all(e).then((e=>{const i=e[0].data,a=e[1].data,n=e[2].data,s=e[3].data,l=e[4].data;try{this.adInfo=i.impAdInfo[0].adInfo[0],this.posId=i.impAdInfo[0].posId,this.adStyle=i.impAdInfo[0].adStyle,this.screenOrientation=l.screenOrientation,this.cardInitInfo()}catch(o){}this.configInfo=n,this.containerLimit=s,this.screenOrientation=l.screenOrientation,r(a),this.additionalInit(),t&&t(!0)}))}cardInitInfo(){this.rewardTaskInfo=this.adInfo.adMatrixInfo.adDataV2.rewardVideoTaskInfo}additionalInit(){var t;if(this.topbarModelType=1,D.registerVideoMuteStateListener((t=>{try{this.isMuted=t.data.muted}catch(e){console.log("error return value")}})),D.registerVideoProgressListener((t=>{if(t.data.failed)this.playFailed=!0;else if(t.data.finished)this.playFinished=!0;else{const e=t.data.currentTime;this.currentPlaybackTime=e}})),k.supportMinimumVersion("3.3.19","3.3.26")&&D.registerDeepRewardListener((t=>{this.hasGetDeepGift=t.data&&t.data.hasDeepReward})),k.supportMinimumVersion("3.3.20","3.3.27")&&k.isAndroid()&&this.isDownloadAd()&&(t=t=>{t.data&&1==t.data.hasInstalled&&2==this.adStyle&&(this.hasInstallTargetApp=!0)},D.callNativeWithCallback("registerApkInstalledListener",null,t,!1)),k.supportMinimumVersion("3.3.20","3.3.27")&&D.registerSceneChangeListener((t=>{t.data&&1==t.data.scene&&(this.hasShowPlayend=!0)})),2==this.getRealAdStyle()&&k.supportMinimumTKVersion("4.0.4")&&D.giveRewardInAdvance((t=>{t.data&&(this.giveRewardTime=t.data.rewardTime||0)})),k.supportMinimumTKVersion("4.0.4")){const t=this;$(t,t.$attrsPath.hasShowPlayend,(t=>{t&&D.getPlayEndType((t=>{if(t&&t.data){const e=t.data.playEndType;this.needShowPlayEndCloseBtn=this.isCloseBtnHide()&&1==e?2:1}else this.needShowPlayEndCloseBtn=1}))}))}else this.needShowPlayEndCloseBtn=1}handleCallImpressionOnFinish(){D.callButtonImpressionWhenFinish()}handleCallImpressionOnPlay(){D.callButtonImpressionWhenPlay()}handleCallClick(t){I()?Kt.convertIfNeeded(0,this.adInfo,1,{x:0,y:0},t?b.PLAY_END_CALL_CLICK:b.PLAY_DETAIL_CALL_CLICK):D.clickCall(t)}handleGiftClick(){D.clickGift()}handleSkip(t,e,i){D.skipVideo(t||!1,e||!1,i||0)}handleMuteChange(t){this.isMuted=t,D.updateVideoMuteState(t)}getResourceRoot(){return"image/ksad-video-top-bar/"}convertForOtherArea(t,e,i){let a=new nt;a.material_click_area="topbar_top",Kt.convertIfNeeded(1,this.adInfo,t,e,i,a)}}class Ft extends Ot{constructor(){super(),this.vm=new xt}setupViews(){let t=null;if(3==this.vm.adStyle)this.vm.getTopbarStyle(),t=new Et(this.vm);else switch(this.vm.getTopbarStyle()){case 3:t=new St(this.vm);break;case 5:t=new At(this.vm);break;case 7:t=new Dt(this.vm);break;case 9:t=new Rt(this.vm);break;case 11:t=new kt(this.vm);break;case 13:t=new Lt(this.vm);break;case 15:t=new bt(this.vm);break;default:t=new wt(this.vm)}this.rootView.appendChild(t),this.topBar=t,this.topBar.updateActionBarState(this.vm.isShowSkipRightNow()?1:0),D.updateExceptedPosition({leftMargin:0,rightMargin:0,topMargin:0,height:this.topBar.expcetedHeight})}render(){if(!super.render())return!1;try{this.vm.getData((t=>{if(t)try{if(this.setupViews(),Tachikoma.render(this.rootView),this.updateRenderStatus(1,""),this.topBar.hasFeedbackBtn()){let t={elementType:194,buttonType:4},e={actionType:140,payload:JSON.stringify(t)};D.sendLog(e)}}catch(e){this.updateRenderStatus(0,u(e))}else this.updateRenderStatus(0,"data invalid")}))}catch(t){this.updateRenderStatus(0,u(t))}return!0}}if(k.isAndroid()||-1!=k.compareVersion(Tachikoma.env.osVersion,"11")||-1!=k.compareVersion(Tachikoma.env.engineVersion,"0.5.36")){(new Ft).render()}else D.pageStatus(0,"ios10")})();
//# sourceMappingURL=ksad-video-top-bar.243.js.map