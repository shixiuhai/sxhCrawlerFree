!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"KSAdExitIntentPopupContainer",(function(){return Y}));var a=null;function n(t){return t instanceof Error?t.message:"string"==typeof t?t:"number"==typeof t?t+"":"unknown"}function s(){return!c(Tachikoma.env.hasTKBridge)&&1==Tachikoma.env.hasTKBridge}function l(t){return"string"==typeof t&&t.length>0}function r(){return a?a.SDKVersion:Tachikoma.env.SDKVersion}function o(){return a?a.sdkType:Tachikoma.env.sdkType}function c(t){return null===t||null==t||""===t}class h{static isAndroid(){return"Android"===this.platform}static getCurrentTimeStamp(){return(new Date).getTime()}static getSemiCircle(){return this.isAndroid()?180:Math.PI}static getRotateSemiCircle(){return this.isAndroid()?45:Math.PI}static compareVersion(t,e){if(void 0===t&&void 0===e)return 0;if(void 0===t)return-1;if(void 0===e)return 1;let i=t.split("."),a=e.split("."),n=Math.max(i.length,a.length);for(var s=0;s<n;s++){let t=Number(void 0!==i[s]?i[s]:"0"),e=Number(void 0!==a[s]?a[s]:"0");if(t>e)return 1;if(t!=e)return-1}return 0}static supportMinimumVersion(t="0.0.0",e="0.0.0"){let i=o(),a=1==i&&-1!=h.compareVersion(r(),t),n=2==i&&-1!=h.compareVersion(r(),e);return a||n}static supportCurrentVersion(t="0.0.0",e="0.0.0"){let i=o(),a=1==i&&0==h.compareVersion(r(),t),n=2==i&&0==h.compareVersion(r(),e);return a||n}static supportMinimumTKVersion(t="0.0.0"){return-1!=h.compareVersion(a?a.tkVersion:Tachikoma.env.tkVersion,t)}}h.platform=Tachikoma.env.platform;class C{static randomString(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",i=e.length,a="",n=0;n<t;n++)a+=e.charAt(Math.floor(Math.random()*i));return a}static randomName(t){return"jscb_"+t+"_"+this.randomString(4)+this.globalIndex++}static registerCallback(t,e=!0){return this.registerCallbackForAction(t,e,"")}static registerCallbackForAction(t,e=!0,i){if(!t)return null;const a=this.randomName(i);return Tachikoma[a]=i=>{t(i),e&&(Tachikoma[a]=null)},"Tachikoma."+a}}C.globalIndex=0;const d=new class{constructor(){this.enabled=!1,this.logs=[]}setLoggerEnabled(t){this.enabled=t}log(t){if(this.enabled){const e=new Date;0==this.logs.length&&this.logs.push(e.getMonth()+1+":"+e.getDate()+"-"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()),this.logs.push(e.getMilliseconds()+":"+t)}}clear(){this.logs.splice(0,this.logs.length)}exportLog(){return JSON.stringify(this.logs)}};class u{static getDeviceInfoAsync(){return u.callNative("getDeviceInfo",null)}static getKsAdDataAsync(){return u.callNative("getKsAdData",null)}static getKsAdConfigAsync(){return u.callNative("getKsAdConfig",null)}static getScreenOrientationAsync(){return u.callNative("getScreenOrientation",null)}static getVideoCloseTime(){return u.callNative("getVideoCloseTime",null)}static getContainerLimitAsync(){return u.callNative("getContainerLimit",null)}static getTKPreEnvAsync(){return u.callNative("getTKPreEnv",null)}static getDeviceInfo(t){this.callNativeWithCallback("getDeviceInfo",null,t)}static getKsAdData(t){this.callNativeWithCallback("getKsAdData",null,t)}static getKsAdConfig(t){this.callNativeWithCallback("getKsAdConfig",null,t)}static getScreenOrientation(t){this.callNativeWithCallback("getScreenOrientation",null,t)}static getContainerLimit(t){return this.callNativeWithCallback("getContainerLimit",null,t)}static registerLifecycleListener(t){this.callNativeWithCallback("registerLifecycleListener",null,t,!1)}static registerNativeId(t){this.callNativeWithCallback("configNativeId",null,t,!1)}static registerExtraDataListener(t){this.callNativeWithCallback("getKsAdExtraData",null,t,!1)}static hideCard(t,e,i,a=!0){this.callNativeWithCallback("hide",{type:t,playDuration:e},i,a)}static sendLog(t,e){this.callNativeWithCallback("log",t,e)}static sendCommonLog(t,e){this.callNativeWithCallback("commonLog",t,e)}static sendCommercialLog(t,e){this.callNativeWithCallback("commercialLog",t,e)}static pageStatus(t,e){this.callNativeWithCallback("pageStatus",{status:t,errorMsg:l(e)?e:""})}static clickAction(t,e,i,a){this.clickActionBase(Object.assign({area:t,logParam:e},i),a)}static clickActionBase(t,e){this.callNativeWithCallback("clickAction",t,e)}static convert(t){this.callNativeWithCallback("convert",{clickActionButton:t})}static updateExceptedPosition(t){this.callNativeWithCallback("initKsAdFrame",t)}static replayVideo(){this.callNativeWithCallback("replayVideo")}static registerVideoListener(t){this.callNativeWithCallback("registerVideoListener",null,t,!1)}static dislike(){this.callNativeWithCallback("dislike")}static registerProgressListener(t){this.callNativeWithCallback("registerProgressListener",null,t,!1)}static registerVideoProgressListener(t){this.callNativeWithCallback("registerVideoProgressListener",null,t,!1)}static registerGetDynamicActionDesListener(t){this.callNativeWithCallback("getDynamicActionDes",null,t,!1)}static registerTimerListener(t){this.callNativeWithCallback("registerTimerListener",null,t,!1)}static registerVideoMuteStateListener(t){this.callNativeWithCallback("registerMuteStateListener",null,t,!1)}static registerVideoAutoPlayListener(t){this.callNativeWithCallback("registerVideoAutoPlayListener",null,t,!1)}static registerPlayStateResetListener(t){this.callNativeWithCallback("registerPlayStateResetListener",null,t,!1)}static updateVideoMuteState(t){this.callNativeWithCallback("updateVideoMuteState",{muted:t})}static skipVideo(t,e,i,a=0){this.callNativeWithCallback("skipVideo",{needPromopt:t,needReport:e,showTime:i,playDuration:a})}static closeVideo(t){this.callNativeWithCallback("closeVideo",{forceClose:t})}static showPlayEnd(t,e=0){this.callNativeWithCallback("showPlayEnd",{userForce:t,type:e})}static showPlayable(t=0){this.callNativeWithCallback("showPlayable",{playableSource:t})}static registerSceneChangeListener(t){this.callNativeWithCallback("registerSceneChangeListener",null,t,!1)}static hasReward(){this.callNativeWithCallback("hasReward")}static clickGift(){this.callNativeWithCallback("clickGift")}static clickCall(t){this.callNativeWithCallback("clickCall",{isEnd:t})}static callButtonImpressionWhenPlay(){this.callNativeWithCallback("callButtonImpressionWhenPlay")}static callButtonImpressionWhenFinish(){this.callNativeWithCallback("callButtonImpressionWhenFinish")}static registerDeepRewardListener(t){this.callNativeWithCallback("registerDeepRewardListener",null,t,!1)}static giveRewardInAdvance(t){this.callNativeWithCallback("giveRewardInAdvance",null,t,!1)}static showLiveEndPage(t){this.callNativeWithCallback("showLiveEndPage",null,t,!1)}static updateRewardTaskState(t){this.callNativeWithCallback("updateRewardTaskState",null,t,!1)}static openURL(t,e){this.callNativeWithCallback("openURL",{url:t,title:e})}static showTKDialog(t){this.callNativeWithCallback("showTKDialog",{templateId:t})}static closeTKDialog(t){this.callNativeWithCallback("closeTKDialog",{templateId:t})}static registerKeyboardChangeListener(t){this.callNativeWithCallback("registerKeyboardChangeListener",null,t,!1)}static registerShakeListener(t){this.callNativeWithCallback("registerMotionListener",null,t,!1)}static close(t){this.callNativeWithCallback("close",null,t,!1)}static closePassData(t,e){this.callNativeWithCallback("close",t,e,!1)}static updateVideoPlayStatus(t,e,i,a){this.callNativeWithCallback("updateVideoPlayStatus",{status:t,errorCode:e||0,errorReason:i||"",currentTime:a||0})}static registerConvertStatusListener(t){this.callNativeWithCallback("registerConvertStatusListener",null,t,!1)}static cardImpression(){this.callNativeWithCallback("cardImpression")}static getCardShowCount(t){this.callNativeWithCallback("getCardShowCount",null,t,!1)}static getNativeData(t,e){this.callNativeWithCallback("getNativeData",{target:t},e,!1)}static updateExtraReward(t){this.callNativeWithCallback("updateExtraReward",t)}static registerApkInstalledListener(t){this.callNativeWithCallback("registerApkInstalledListener",null,t,!1)}static showToast(t){this.callNativeWithCallback("showToast",{message:t})}static registerExtraDialogListener(t){this.callNativeWithCallback("registerExtraDialogListener",null,t,!1)}static getPlayEndType(t){this.callNativeWithCallback("getPlayEndType",null,t,!1)}static playableConvert(t){this.callNativeWithCallback("playableConvert",t)}static getKsPlayableAdData(t){this.callNativeWithCallback("getKsPlayableAdData",null,t)}static getKsPlayableDeviceInfo(t){this.callNativeWithCallback("getKsPlayableDeviceInfo",null,t)}static registerPlayableStatusListener(t){this.callNativeWithCallback("registerPlayableStatusListener",null,t,!1)}static getTrackAdStatus(t){this.callNativeWithCallback("getTrackAdStatus",null,t,!1)}static showLandingPage(t){this.callNative("showLandingPage",{needCloseNeo:t})}static needCloseNeo(t){this.callNativeWithCallback("needCloseNeo",{needClose:t})}static registerBackPressed(t){this.callNativeWithCallback("registerBackPressedListener",null,t,!1)}static innerAdImpression(){this.callNativeWithCallback("adImpression",null)}static neoDidShowPlayAgain(){this.callNativeWithCallback("neoDidShowPlayAgain")}static showPlayAgain(){this.callNativeWithCallback("showPlayAgain")}static registerAggregationDataListener(t){this.callNativeWithCallback("registerAggregationDataListener",null,t,!1)}static callNative(t,e){return new Promise((i,a)=>this.callNativeWithCallback(t,e,t=>{t?(1!=t.result&&(t.result=null),i(t)):i({result:0,data:null})}))}static callNativeWithCallback(t,e,i,a=!0){const n=s()?1:0;s()&&"pageStatus"==t||s()&&"registerLifecycleListener"==t?this.callNativeWithCallbackAndType(t,e,i,a,0):this.callNativeWithCallbackAndType(t,e,i,a,n)}static callTKWithCallback(t,e,i,a=!0){this.callNativeWithCallbackAndType(t,e,i,a,1)}static callNativeWithCallbackAndType(t,e,i,a=!0,n=0){if("undefined"==typeof KwaiAd)return d.log("undefined value KwaiAd"),void(i&&i({result:0,data:null}));d.log("call:"+t);const s=C.registerCallbackForAction(e=>{let a=0,n=null;try{let t=null;t="string"==typeof e?JSON.parse(e):e,a=t.result,n=t.data}catch(s){a=0,n=null}d.log("cb:"+t+"  r:"+a),i&&i({result:a,data:n})},a,t),l={action:t,data:JSON.stringify(e||{}),callback:s};0==n?KwaiAd.callAdBridge(l):KwaiAd.callTKBridge(l)}}class g extends Object{constructor(t,e,i,a){var n;super(),this.depIds={},this.vm=t,this.getter="function"==typeof e?e:this.parseGetter(e.trim()),this.cb=i,this.value=this.get(),this.cb(null!==(n=this.value)&&void 0!==n?n:a,null),console.log("Watcher on "+e)}update(){const t=this.get();t!=this.value&&(this.cb.call(this.vm,t,this.value),this.value=t)}addDep(t){const e=t.pid;this.depIds.hasOwnProperty(e)||(t.addDep(this),this.depIds[e]=t)}get(){g.target=this;const t=this.getter.call(this.vm,this.vm);return g.target=null,t}parseGetter(t){if(/[^\w.$]/.test(t))return;const e=t.split(".");return function(t){for(let i=0,a=e.length;i<a;i++){if(!t)return;t=t[e[i]]}return t}}}function p(t){return!!t}let _=void 0;function T(){if(null!=_)return _;let t=!1;try{t=!1,_=t}catch(e){}return t}function I(t){T()&&console.log("tachikoma TKMVVM log -> "+t)}class A extends Object{constructor(t,e){super(),this.object=t,this.observeKey=e,this._observe(t,e)}_observe(t,e){var i=this;Array.isArray(t)?this.defineArray(t):Object.keys(t).forEach((function(a){e?e===a&&i.observeValueWithKey(t,a):i.observeValueWithKey(t,a)}))}observeValueWithKey(t,e){let i=t[e];var a=new N(e);L(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get:function(){return g.target&&a.depend(),i},set:function(t){t!==i&&(i=t,a.notify(),L(t))}})}defineArray(t){if(t)for(let e=0,i=t.length;e<i;e++)L(t[e])}}var f=0;class N extends Object{constructor(t){super(),this.key=t,this.pid=f++,this.deps=new Array}depend(){g.target.addDep(this)}addDep(t){this.deps.push(t)}removeDep(t){}notify(){this.deps.forEach((function(t){t.update()}))}}function L(t,e){if(!t||"object"!=typeof t)return;var i;if(!("object"==typeof(i=t)&&Object.keys(i).length>0))return;let a=!1,n=(null!=e?e:"")+"_tkmvvm_observed";if(t.hasOwnProperty(n)&&(a=t[n]),!a)return I("observe "+n),t[n]=!0,new A(t,e);I("already observe "+n)}class v extends Object{constructor(){super()}tk_observe(t){p(t)&&(t in this?L(this,t):console.log("=====++++++ observe2: key not in this:"+t+":"+typeof this))}}class y extends v{constructor(){super(),this.$attrsPath=new Proxy(this,{get:(t,e)=>function t(e,i){return new Proxy({$vm:e,$bind_path:i},{get:(a,n)=>"string"!=typeof n||"function"==typeof a[n]||0==n.indexOf("$")?Reflect.get(a,n):t(e,i+"."+n)})}(t,e)})}getData(t){}}var b,E;!function(t){t.START="start",t.CENTRT="center",t.END="end"}(b||(b={})),function(t){t[t.unknown=0]="unknown",t[t.DetailOne=1]="DetailOne",t[t.Simple=2]="Simple",t[t.DetailTwo=3]="DetailTwo"}(E||(E={}));var m;!function(t){t[t.RETAIN_CARD_TYPE_2=9]="RETAIN_CARD_TYPE_2",t[t.RETAIN_CARD_TYPE_3=10]="RETAIN_CARD_TYPE_3",t[t.RETAIN_CARD_TYPE_4=11]="RETAIN_CARD_TYPE_4"}(m||(m={}));class k{}var R,D,w,K;!function(t){t[t.NONE=-1]="NONE",t[t.ACTION_BAR_CLICK=1]="ACTION_BAR_CLICK",t[t.UNKNOWN_ITEM_CLICK=0]="UNKNOWN_ITEM_CLICK",t[t.PLAY_END_ICON_CLICK=15]="PLAY_END_ICON_CLICK",t[t.PLAY_END_ICON_TITLE_CLICK=16]="PLAY_END_ICON_TITLE_CLICK",t[t.PLAY_END_ICON_DESCRIPTION_CLICK=17]="PLAY_END_ICON_DESCRIPTION_CLICK",t[t.PLAY_END_ACTION_BAR_CLICK=26]="PLAY_END_ACTION_BAR_CLICK",t[t.CARD_ACTION_BAR_CLICK=29]="CARD_ACTION_BAR_CLICK",t[t.CARD_ICON_CLICK=30]="CARD_ICON_CLICK",t[t.CARD_ICON_NAME_CLICK=31]="CARD_ICON_NAME_CLICK",t[t.CARD_ICON_COMMENT_CLICK=32]="CARD_ICON_COMMENT_CLICK",t[t.CARD_BLANK_AREA_CLICK=35]="CARD_BLANK_AREA_CLICK",t[t.CARD_PLAY_END_CLICK1=37]="CARD_PLAY_END_CLICK1",t[t.CARD_PLAY_END_CLICK2=38]="CARD_PLAY_END_CLICK2",t[t.PLAY_END_CALL_CLICK=39]="PLAY_END_CALL_CLICK",t[t.PLAY_DETAIL_CALL_CLICK=40]="PLAY_DETAIL_CALL_CLICK",t[t.PLAY_END_GIFT_CLICK=41]="PLAY_END_GIFT_CLICK",t[t.CARD_APP_STORE_CLICK=45]="CARD_APP_STORE_CLICK",t[t.CARD_APP_DOWNLOAD_NUM_CLICK=46]="CARD_APP_DOWNLOAD_NUM_CLICK",t[t.CARD_OTHERAREA_CLICK=53]="CARD_OTHERAREA_CLICK",t[t.CARD_ICON_MOBILE_CLICK=54]="CARD_ICON_MOBILE_CLICK",t[t.CARD_PICTURE_CLICK_ONE=57]="CARD_PICTURE_CLICK_ONE",t[t.CARD_PICTURE_CLICK_TWO=58]="CARD_PICTURE_CLICK_TWO",t[t.CARD_PICTURE_CLICK_THREE=59]="CARD_PICTURE_CLICK_THREE",t[t.CARD_PICTURE_TITLE_CLICK_ONE=60]="CARD_PICTURE_TITLE_CLICK_ONE",t[t.CARD_PICTURE_TITLE_CLICK_TWO=61]="CARD_PICTURE_TITLE_CLICK_TWO",t[t.CARD_PICTURE_TITLE_CLICK_THREE=62]="CARD_PICTURE_TITLE_CLICK_THREE",t[t.CARD_PICTURE_SUBTITLE_CLICK_ONE=63]="CARD_PICTURE_SUBTITLE_CLICK_ONE",t[t.CARD_PICTURE_SUBTITLE_CLICK_TWO=64]="CARD_PICTURE_SUBTITLE_CLICK_TWO",t[t.CARD_PICTURE_SUBTITLE_CLICK_THREE=65]="CARD_PICTURE_SUBTITLE_CLICK_THREE",t[t.CARD_RANK_CLICK=75]="CARD_RANK_CLICK",t[t.CARD_DOWNLOAD_CNT_CLICK=76]="CARD_DOWNLOAD_CNT_CLICK",t[t.CARD_TAG_CLICK=77]="CARD_TAG_CLICK",t[t.CARD_RECOMMEND_REASON_CLICK=84]="CARD_RECOMMEND_REASON_CLICK",t[t.CARD_PAGE_CLICK=85]="CARD_PAGE_CLICK",t[t.PLAYEND_ICON_OTHERAREA_CLICK=104]="PLAYEND_ICON_OTHERAREA_CLICK",t[t.ACTIONBAR_ICON_CLICK=115]="ACTIONBAR_ICON_CLICK",t[t.ACTIONBAR_ICON_COMMENT_CLICK=117]="ACTIONBAR_ICON_COMMENT_CLICK",t[t.ACTIONBAR_ICON_OTHER_AREA_CLICK=118]="ACTIONBAR_ICON_OTHER_AREA_CLICK",t[t.CLOSE_BULLET_ICON_CLICK=127]="CLOSE_BULLET_ICON_CLICK",t[t.CLOSE_BULLET_ICON_DESCRIPTION_CLICK=129]="CLOSE_BULLET_ICON_DESCRIPTION_CLICK",t[t.CLOSE_BULLET_ACTION_BAR_CLICK=131]="CLOSE_BULLET_ACTION_BAR_CLICK",t[t.NEO_AUTO_SHOW_STOREKIT=147]="NEO_AUTO_SHOW_STOREKIT",t[t.CARD_LEFT_ACTION_BAR_CLICK=150]="CARD_LEFT_ACTION_BAR_CLICK",t[t.CARD_SWIPE_CONVERT=153]="CARD_SWIPE_CONVERT",t[t.SHAKE_ICON_SHACK=157]="SHAKE_ICON_SHACK",t[t.SHAKE_BIG_ICON_CLICK=158]="SHAKE_BIG_ICON_CLICK",t[t.CARD_FOLLOW_NUM=172]="CARD_FOLLOW_NUM",t[t.FALL_ICON_CLICK=173]="FALL_ICON_CLICK",t[t.LIVE_BUTTON_CLICK=175]="LIVE_BUTTON_CLICK",t[t.DIRECT_H5_PAGE_CLICK=177]="DIRECT_H5_PAGE_CLICK"}(R||(R={})),function(t){t[t.adClickReward=1]="adClickReward"}(D||(D={})),function(t){t[t.isRewarded=1]="isRewarded",t[t.noExtraReward=2]="noExtraReward",t[t.hasWatchReward=3]="hasWatchReward"}(w||(w={})),function(t){t[t.horizontal=1]="horizontal",t[t.vertical=2]="vertical"}(K||(K={}));function O(t){let e=null;try{switch(t.adBaseInfo.adOperationType){case 1:e=t.adBaseInfo.appName;break;case 2:e=t.adBaseInfo.productName}l(e)||(e=t.advertiserInfo.rawUserName)}catch(i){}return e||"可爱的广告君"}function S(t,e){let i=!0;if(1==t.adBaseInfo.adOperationType)try{let a=t.downloadSafeInfo.complianceInfo;if(null!=a)switch(e){case 1:i=3!=a.actionBarType;break;case 2:i=3!=a.describeBarType;break;case 3:i=3!=a.materialJumpType;break;default:i=!0}}catch(a){i=!0}else try{let a=t.unDownloadConf.unDownloadRegionConf;if(null!=a)switch(e){case 1:i=1!=a.actionBarType;break;case 2:i=1!=a.describeBarType;break;case 3:i=1!=a.materialJumpType;break;default:i=!0}}catch(a){i=!0}return i}let P;function W(){var t;return P||(P={all:t=t||new Map,on(e,i){const a=t.get(e);a?a.push(i):t.set(e,[i])},off(e,i){const a=t.get(e);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(e,[]))},emit(e,i){let a=t.get(e);a&&a.slice().map(t=>{t(i)}),a=t.get("*"),a&&a.slice().map(t=>{t(e,i)})},clear(){t.clear()}}),P}class x extends y{constructor(){super(...arguments),this.isMoreShow=!1}getData(t){let e=[];e.push(u.getKsAdDataAsync()),e.push(u.getDeviceInfoAsync()),e.push(u.getKsAdConfigAsync()),e.push(u.getContainerLimitAsync()),e.push(u.getScreenOrientationAsync()),e.push(u.getTKPreEnvAsync()),Promise.all(e).then(e=>{const i=e[0].data,n=e[1].data,s=e[2].data,l=e[3].data,r=e[4].data;try{this.adInfo=i.impAdInfo[0].adInfo[0],this.adStyle=i.impAdInfo[0].adStyle,this.screenOrientation=r.screenOrientation,o=this.deviceInfo,a=o}catch(c){}var o;try{const t=e[5].data;this.isMoreShow=t.isMoreShow}catch(c){}this.deviceInfo=n,this.configInfo=s,this.containerLimit=l,this.screenOrientation=r.screenOrientation,t&&t(!0)})}checkDataValid(){return!!this.adInfo}getPopUpViewStyle(){var t;return null===(t=this.adInfo.adMatrixInfo.adDataV2.adExitIntentPopUpInfo)||void 0===t?void 0:t.style}handleAbandon(){let t={elementType:151,retain_code_type:this.getRetainCodeType()},e={actionType:141,payload:JSON.stringify(t)};u.sendLog(e),this.closeCad(),u.skipVideo(!1,!0,0)}popupExposure(){let t={elementType:149,retain_code_type:this.getRetainCodeType()};if(!this.isMoreShow){let e=new k;e.universe_feature_freq=4,t.clientExtData=JSON.stringify(e)}let e={actionType:140,payload:JSON.stringify(t)};u.sendLog(e)}getRetainCodeType(){switch(this.getPopUpViewStyle()){case E.DetailOne:return m.RETAIN_CARD_TYPE_2;case E.DetailTwo:return m.RETAIN_CARD_TYPE_4;case E.Simple:default:return m.RETAIN_CARD_TYPE_3}}handleContinue(){let t={retain_code_type:this.getRetainCodeType()},e={actionType:451,payload:JSON.stringify(t)};u.sendLog(e),this.closeCad()}handleClose(){let t={elementType:151,retain_code_type:this.getRetainCodeType()},e={actionType:141,payload:JSON.stringify(t)};u.sendLog(e),this.closeCad()}closeCad(){u.closeTKDialog("ksad-exit-intent-popup")}handleDetailAction(){this.handleConvert(1,{x:0,y:0},R.CLOSE_BULLET_ACTION_BAR_CLICK),this.closeCad()}handleConvert(t,e,i){(class{static log(t,e,i){(i=i||{}).renderContainer=1;const a={actionType:t,payload:JSON.stringify(i)};e&&(a.clickInfo=e),u.sendLog(a)}static convertIfNeeded(t,e,i,a,n,s,l,r){let o=S(e,i);console.log("tkloadcontroller shouldconvert:"+o),o&&this.convert(i,a,n,t,s,l,r)}static convert(t,e,i,a,n,s,l){let r;r=c(n)?{itemClickType:i,renderContainer:1}:{itemClickType:i,renderContainer:1,clientExtData:JSON.stringify(n)},c(s)||Object.assign(r,s),W().emit("ad_convert_event",{clickType:i}),u.clickAction(t,{payload:JSON.stringify(r),clickInfo:{x:e.x,y:e.y},sceneType:a,itemClickType:i},l,i=>{1!=i.result&&(this.log(2,e,r),u.convert(1==t))})}static expose(t){this.log(1,null,t)}static exposeElement(t){let e={elementType:t};this.log(140,null,e)}static clickElement(t){const e={elementType:t};this.log(141,null,e)}static convertWithTypeIfNeeded(t,e,i,a,n){if(h.isAndroid())this.convertWithType(e,i,a,n);else{if(!S(t,e))return;this.convertWithType(e,i,a,n)}}static convertWithType(t,e,i,a){let n={itemClickType:i,renderContainer:1};W().emit("ad_convert_event",{clickType:i}),u.clickAction(t,{payload:JSON.stringify(n),clickInfo:{x:e.x,y:e.y},convertType:a},i=>{1!=i.result&&(this.log(2,e,n),u.convert(1==t))})}static convertWithTypeIfNeededNew(t,e,i,a,n,s){if(h.isAndroid())this.convertWithTypeNew(e,i,a,n,s);else{if(!S(t,e))return;this.convertWithTypeNew(e,i,a,n,s)}}static convertWithTypeNew(t,e,i,a,n){let s=n||{};s.itemClickType=i,s.renderContainer=1,W().emit("ad_convert_event",{clickType:i}),u.clickAction(t,{payload:JSON.stringify(s),clickInfo:{x:e.x,y:e.y},convertType:a},i=>{1!=i.result&&(this.log(2,e,s),u.convert(1==t))})}static convertNew(t,e,i,a,n,s){let l=s||{};l.itemClickType=n,l.renderContainer=1,W().emit("ad_convert_event",{clickType:n});let r=n;u.clickAction(e,{payload:JSON.stringify(l),clickInfo:{x:i.x,y:i.y,width:a.width,height:a.height},sceneType:t,itemClickType:r},t=>{1!=t.result&&(this.log(2,i,l),u.convert(1==e))})}static playNSecond(t){let e={photoPlaySecond:t};this.log(402,null,e)}static skip(){this.log(501,null,null)}}).convertIfNeeded(6,this.adInfo,t,e,i,null,{retain_code_type:this.getRetainCodeType()})}getIconUrl(){try{let t=this.adInfo.adBaseInfo.appIconUrl;return l(t)||(t=this.adInfo.advertiserInfo.portraitUrl),l(t)||(t="https://static.yximgs.com/udata/pkg/ad-universe/universe_icon.png"),t}catch(t){}return"https://static.yximgs.com/udata/pkg/ad-universe/universe_icon.png"}getProductName(){return O(this.adInfo)}getDescription(){let t="";try{t=this.adInfo.adBaseInfo.adDescription}catch(e){}return t}}class F extends TKView{}class B extends F{constructor(t){super(),this.vm=t,this.vm.checkDataValid()&&(this.vm.popupExposure(),this.setupViews())}setupViews(){this.detailButton=new TKText,this.continueButton=new TKText,this.skipButton=new TKText;const t=this;this.detailButton.addEventListener("tap",e=>{t.vm.handleDetailAction()}),this.continueButton.addEventListener("tap",e=>{t.vm.handleContinue()}),this.skipButton.addEventListener("tap",e=>{t.vm.handleAbandon()})}getDetailButtonText(){return"了解详情"}getContinueButtonText(){return"留下看看"}getSkipButtonText(){return"残忍离开"}getSimpleCenterContentText(){return"内容很精彩，不在看看吗？"}}class V extends TKView{constructor(t){super(),this.vm=t,this.setupViews()}setupViews(){this.style={width:"100%",height:135,flexDirection:"column",justifyContent:"flex-start",alignItems:"center",marginTop:24},this.appIcon=new TKImage,this.appIcon.style={width:54,height:54,borderRadius:12,borderWidth:1,borderColor:"#EAEAEA"},this.appIcon.setUri(this.vm.getIconUrl()),this.appendChild(this.appIcon),this.nameLabel=new TKText,this.nameLabel.style={fontSize:16,fontWeight:"medium",color:"#222222",marginTop:10},this.nameLabel.setText(this.vm.getProductName()),this.appendChild(this.nameLabel),this.detailLabel=new TKText,this.detailLabel.style={maxWidth:"82%",maxHeight:46,fontSize:14,color:"#666666",textLineClamp:2,textOverflow:"ellipsis",marginTop:10,textAlign:"center"},this.detailLabel.setText(this.vm.getDescription()),this.appendChild(this.detailLabel)}}class U extends B{constructor(t){super(t)}setupViews(){super.setupViews(),this.style={width:271,height:305,borderRadius:12,backgroundColor:"#FFFFFF",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},this.adDetailView=new V(this.vm),this.appendChild(this.adDetailView),this.detailContainer=new TKView,this.detailContainer.style={width:76,height:20,marginTop:10,backgroundColor:"#FFFFFF",flexDirection:"row",justifyContent:"flex-start"},this.appendChild(this.detailContainer),this.detailButton.style={width:66,height:18,color:"#FE3666",backgroundColor:"#FFFFFF",fontWeight:"bold",textAlign:"center"},this.detailButton.setText(this.getDetailButtonText()),this.detailContainer.appendChild(this.detailButton),this.detailArrow=new TKImage,this.detailArrow.style={width:10,height:10,alignSelf:"center"},this.detailArrow.setSrc("https://tx-ad.a.yximgs.com/kos/nlav11524/ksad/icon_ksad_exit_poup_arrow3.png"),this.detailContainer.appendChild(this.detailArrow),this.continueButton.style={width:207,height:46,color:"#FFFFFF",marginTop:24,fontSize:15,backgroundColor:"#FE3666",borderRadius:23,fontWeight:"bold",textAlign:"center"},this.continueButton.setText(this.getContinueButtonText()),this.appendChild(this.continueButton),this.skipButton.style={width:54,height:17,fontSize:12,color:"#9C9C9C",marginTop:12,backgroundColor:"#FFFFFF",fontWeight:"bold",textAlign:"center"},this.skipButton.setText(this.getSkipButtonText()),this.appendChild(this.skipButton)}}class M extends B{constructor(t){super(t)}setupViews(){super.setupViews(),this.style={width:271,height:334,flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},this.container=new TKView,this.container.style={width:271,height:304,backgroundColor:"#FFFFFF",borderRadius:12,flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},this.appendChild(this.container),this.adDetailView=new V(this.vm),this.container.appendChild(this.adDetailView),this.buttonContainer=new TKView,this.buttonContainer.style={width:"100%",height:102,flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:24},this.container.appendChild(this.buttonContainer),this.detailButton.style={width:207,height:46,fontSize:15,color:"#FFFFFF",backgroundColor:"#FE3666",borderRadius:23,fontWeight:"bold",textAlign:"center"},this.detailButton.setText(this.getDetailButtonText()),this.buttonContainer.appendChild(this.detailButton),this.continueButton.style={width:207,height:46,fontSize:15,backgroundColor:"#FFFFFF",borderWidth:1,borderColor:"#FE366680",color:"#FE3666",borderRadius:23,marginTop:10,fontWeight:"bold",textAlign:"center"},this.continueButton.setText(this.getContinueButtonText()),this.buttonContainer.appendChild(this.continueButton),this.skipButton.style={width:80,height:17,fontSize:12,color:"#FFFFFFCC",marginTop:15,backgroundColor:"#FFFFFF00",fontWeight:"bold",textAlign:"center"},this.skipButton.setText(this.getSkipButtonText()),this.appendChild(this.skipButton)}}class j extends B{constructor(t){super(t)}setupViews(){super.setupViews(),this.style={width:280,height:171,borderRadius:12},this.dialogcontainer=new TKView,this.dialogcontainer.style={width:280,height:138,borderRadius:12,backgroundColor:"#ffffff"},this.appendChild(this.dialogcontainer),this.detailText=new TKText,this.detailText.style={width:"100%",height:25,fontSize:18,fontWeight:"bold",textAlign:"center",backgroundColor:"#FFFFFF",color:"#222222",marginTop:32},this.detailText.setText(this.getSimpleCenterContentText()),this.dialogcontainer.appendChild(this.detailText),this.buttonContainer=new TKView,this.buttonContainer.style={width:"100%",height:48,flexDirection:"row",justifyContent:"space-around",alignItems:"flex-start",bottomLeftRadius:12,bottomRightRadius:12,backgroundColor:"#EAEAEA",marginTop:32,padding:1},this.dialogcontainer.appendChild(this.buttonContainer),this.continueButton.style={width:140,height:47,fontSize:15,backgroundColor:"#FFFFFF",color:"#666666",bottomLeftRadius:12,fontWeight:"bold",textAlign:"center"},this.continueButton.setText(this.getContinueButtonText()),this.buttonContainer.appendChild(this.continueButton),this.detailButton.style={width:140,height:47,fontSize:15,color:"#FE3666",bottomRightRadius:12,overflow:"hidden",marginLeft:4,backgroundColor:"#FFFFFF",fontWeight:"bold",textAlign:"center"},this.detailButton.setText(this.getDetailButtonText()),this.buttonContainer.appendChild(this.detailButton),this.skipButton.style={width:54,height:16,fontSize:12,color:"#FFFFFFCC",marginTop:16,backgroundColor:"#FFFFFF00",alignSelf:"center",fontWeight:"bold"},this.skipButton.setText(this.getSkipButtonText()),this.appendChild(this.skipButton)}}class Y extends class{constructor(){this.renderCalled=!1,this.renderStatusCalled=!1,this.rootView=new TKView,this.rootView.style={width:"100%",height:"100%"}}render(){return!this.renderCalled&&(this.renderCalled=!0,!0)}updateRenderStatus(t,e=""){this.renderCalled&&!this.renderStatusCalled&&(this.renderStatusCalled=!0,u.pageStatus(t,e),this.registerNativeId())}registerNativeId(){1==Tachikoma.env.isDebug&&h.supportMinimumTKVersion("4.0.7")&&!h.isAndroid()&&(this.startConfig(),u.registerNativeId(t=>{t&&t.data&&this.startConfig()}))}startConfig(){this.configNativeIdTimer&&clearTimeout(this.configNativeIdTimer),this.configNativeIdTimer=setTimeout(()=>{!function t(e){if(e)for(const i in e){if("object"==typeof e[i])for(const a in e[i])if("nativeID"==a&&"private"!=i){e[i].nativeID||(e[i].nativeID=i),t(e[i]);break}}}(this)},120)}}{constructor(){super(),this.vm=new x}setupViews(){switch(this.rootView.style={width:"100%",height:"100%",backgroundColor:"#00000080",alignItems:"center",justifyContent:"center"},this.vm.getPopUpViewStyle()){case E.DetailOne:this.contentView=new U(this.vm);break;case E.DetailTwo:this.contentView=new M(this.vm);break;case E.Simple:default:this.contentView=new j(this.vm)}this.rootView.appendChild(this.contentView)}render(){if(this.renderCalled)return!1;this.renderCalled=!0;try{this.vm.getData(t=>{if(t)try{this.setupViews(),Tachikoma.render(this.rootView),this.updateRenderStatus(1,"")}catch(e){this.updateRenderStatus(0,n(e))}else this.updateRenderStatus(0,"data invalid")})}catch(t){this.updateRenderStatus(0,n(t))}return!0}}(new Y).render()}]);